# Migration `20200311180828-record`

This migration has been generated by keita-makino at 3/11/2020, 6:08:28 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Record" (
    "address" text  NOT NULL DEFAULT '',
    "id" SERIAL,
    "lat" Decimal(65,30)  NOT NULL DEFAULT 0,
    "lng" Decimal(65,30)  NOT NULL DEFAULT 0,
    "name" text  NOT NULL DEFAULT '',
    "room" integer  NOT NULL ,
    "type" integer  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."RecordType" (
    "id" integer  NOT NULL ,
    "name" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

ALTER TABLE "public"."Record" ADD FOREIGN KEY ("room")REFERENCES "public"."Room"("id") ON DELETE RESTRICT  ON UPDATE CASCADE

ALTER TABLE "public"."Record" ADD FOREIGN KEY ("type")REFERENCES "public"."RecordType"("id") ON DELETE RESTRICT  ON UPDATE CASCADE

DROP TABLE "public"."Data";

DROP TABLE "public"."DataType";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200311173717-rooms..20200311180828-record
--- datamodel.dml
+++ datamodel.dml
@@ -3,36 +3,35 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
-  // PostgreSQL URL
+  url      = "postgres://ojqgzezcrkkccv:413545d8bc9cfbeb322834d87f2369199c51d226e374dc06da6883681e1fa266@ec2-35-172-85-250.compute-1.amazonaws.com:5432/d23tt9hq4p0gh8"
 }
-model DataType {
-  id       Int    @id
-  name     String @default("")
-  mainData Data[]
+model Record {
+  address String     @default("")
+  id      Int        @default(autoincrement()) @id
+  lat     Float      @default(0)
+  lng     Float      @default(0)
+  name    String     @default("")
+  room    Room
+  type    RecordType
 }
-model Data {
-  address String   @default("")
-  id      Int      @default(autoincrement()) @id
-  lat     Float    @default(0)
-  lng     Float    @default(0)
-  name    String   @default("")
-  room    Room
-  type    DataType
+model RecordType {
+  id   Int      @id
+  name String   @default("")
+  data Record[]
 }
+model Room {
+  id   Int      @default(autoincrement()) @id
+  name String   @default("")
+  data Record[]
+}
+
 model User {
   email    String @default("") @unique
   id       Int    @default(autoincrement()) @id
-  name     String
+  name     String @default("")
   password String @default("")
-}
-
-model Room {
-  id   Int    @default(autoincrement()) @id
-  name String
-  data Data[]
 }
```


