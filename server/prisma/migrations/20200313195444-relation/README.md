# Migration `20200313195444-relation`

This migration has been generated by keita-makino at 3/13/2020, 7:54:44 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."RecordType" DROP CONSTRAINT IF EXiSTS "RecordType_room_fkey",
ALTER COLUMN "room" DROP DEFAULT;

ALTER TABLE "public"."RecordType" ADD FOREIGN KEY ("room")REFERENCES "public"."Room"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200313195234-minor..20200313195444-relation
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = "postgres://ojqgzezcrkkccv:413545d8bc9cfbeb322834d87f2369199c51d226e374dc06da6883681e1fa266@ec2-35-172-85-250.compute-1.amazonaws.com:5432/d23tt9hq4p0gh8"
 }
 model Record {
   address String     @default("")
@@ -16,31 +16,32 @@
   type    RecordType
 }
 model RecordType {
-  id     Int      @default(autoincrement()) @id
+  id     Int      @id
   name   String   @default("")
-  room   Int
+  room   Room
   record Record[]
 }
 model Room {
-  id   Int    @default(autoincrement()) @id
-  name String @default("")
+  id         Int          @default(autoincrement()) @id
+  name       String       @default("")
+  recordType RecordType[]
 }
 model Setting {
   cellSize Float   @default(0.00025)
   darkMode Boolean @default(false)
-  id       Int     @default(autoincrement()) @id
+  height   Float   @default(5)
+  id       Int     @id
   markSize Float   @default(5)
-  height   Float   @default(5)
   user     User?
 }
 model User {
-  email    String  @default("") @unique
-  id       Int     @default(autoincrement()) @id
-  name     String  @default("")
-  password String  @default("")
-  setting  Setting
+  email    String   @default("") @unique
+  id       Int      @default(autoincrement()) @id
+  name     String   @default("")
+  password String   @default("")
+  setting  Setting?
 }
```


