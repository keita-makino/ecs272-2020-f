{"version":3,"sources":["App.tsx","constructors/shapeConstructors.ts","constructors/shapeSetConstructor.ts","utils/countInterferenceNodes.ts","utils/getClosestNeightboringNode.ts","utils/getCenterNodeAlongEdge.ts","utils/rerouteEdgePoint.ts","utils/doesPointExist.ts","utils/isPointIncluded.ts","utils/rerouteEdges.ts","utils/connectNodes.ts","utils/getVirtualEdges.ts","constructors/areaDomainConstructor.ts","utils/getPaths.ts","utils/isAllContained.ts","utils/evaluateRepulsion.ts","utils/fillPotentialGrid.ts","utils/getContour.ts","uses/useRoom.ts","uses/useFilteredData.ts","uses/useUser.ts","uses/useBusy.ts","uses/useContoursEdges.ts","uses/useScatters.ts","uses/usePlotData.ts","utils/getIcon.ts","components/molecules/ToolTip.tsx","utils/updateVis.ts","components/molecules/AddRecordToolTip.tsx","utils/geocoder.ts","components/organisms/Map.tsx","components/atoms/ToggleLabel.tsx","components/atoms/SliderLabel.tsx","components/molecules/ControlPanel.tsx","components/atoms/TypeLabel.tsx","components/atoms/AddType.tsx","components/molecules/TypeLabelPanel.tsx","components/molecules/TitlePanel.tsx","components/organisms/Sidebar.tsx","components/molecules/ChangeMode.tsx","components/organisms/MiddlePanel.tsx","components/templates/Main.tsx","data/initialState.ts","data/theme.ts","components/organisms/LoadingScreen.tsx","data/mock.ts","components/organisms/StartPanel.tsx","components/templates/Start.tsx","pages/Index.tsx","serviceWorker.ts","index.tsx"],"names":["cache","InMemoryCache","freezeResults","link","HttpLink","uri","client","ApolloClient","resolvers","writeData","data","session","userId","roomId","editMode","modifying","computing","isLoading","__typename","hot","module","createEdge","s","e","start","end","center","add","scale","length","getDistance","getCorrespondingBuffer","a","r","array","numOfSegments","Math","ceil","Number","EPSILON","Array","fill","map","item","index","c","sub","position","lng","domain","boundary","xMin","cellSize","lat","yMin","diff","floor","height","item2","index2","push","numOfCells","filter","indexOf","createNode","radius","getDistanceToEdge","xC","yC","dot","param","pow","undefined","point","createArea","d","buffer","Float32Array","getBuffer","x","y","setBuffer","v","getPosition","createPoint","p","sqrt","n","createShapeSet","nodes","type","activeFunctions","getBoundary","getCenter","reduce","prev","curr","shapeSet","parentSet","getDistanceToCenter","parent","countInterferenceNodes","inactiveSetNodes","edge","getClosestNeightboringNode","node","visited","numOfInterferenceNodes","distance","minDistance","closestNeighboringNode","Promise","resolve","POSITIVE_INFINITY","getCenterNodeAlongEdge","_prev","distanceRatio","minDistanceRatio","rerouteEdgePoint","wrapNormal","internalDivision","closestPointOnEdge","newPoint","doesPointExist","edges","isPointIncluded","rerouteEdges","edgesToCheck","scannedEdges","hasIntersection","iterations","pop","centerNode","tempBufferForMorphing","isExisted","isIncluded","reroutedPoint","edge1","edge2","combinedEdge","connectNodes","activeSetNodes","all","slice","testEdge","flat","getVirtualEdges","activeSet","inactiveSet","sort","b","createAreaDomain","getRange","range","xMax","yMax","set","min","max","getPaths","threshold","result","contours","size","area","smooth","contour","from","coordinates","isAllContained","path","prev2","curr2","polygonContains","evaluateRepulsion","potentialGrid","target","factor","element","dr","fillPotentialGrid","parameter","rDiff","inverse","getContour","r0","r1","iteration","factorNode","factorNodeNegative","factorEdge","points","getCoordinates","GET_ROOM","gql","GET_CURRENT_ROOM_ID","CREATE_NEW_ROOM","useCurrentRoom","useQuery","useRoom","id","variables","room","useFilteredData","useState","filtered","setFiltered","useEffect","recordType","active","GET_USER","GET_CURRENT_USER_ID","CREATE_NEW_USER","useCurrentUser","useUser","GET_BUSY","changeBusy","changeTo","readQuery","query","writeQuery","useBusy","state","setState","useContoursEdges","recordTypes","useApolloClient","isModifying","contoursEdges","setContoursEdges","f","user","record","setting","markSize","name","color","newContoursEdges","flatMap","useScatters","scatters","setScatters","newRecordTypes","properties","fillColor","typeId","address","geometry","features","usePlotData","plotData","setPlotData","getIcon","foodMarket","busStop","restaurant","medicalClinic","DELETE_RECORD","ToolTip","props","currentRoom","useMutation","update","deleteOneRecord","typeIndex","findIndex","newRoom","mutation","Card","style","maxWidth","zIndex","top","left","Grid","container","xs","padding","alignItems","justify","Icon","camelcase","Typography","variant","ButtonBase","onClick","where","setTooltip","DeleteForever","Divider","updateVis","recordIndex","newElement","CREATE_RECORD","useStyles","makeStyles","theme","card","backgroundColor","palette","background","default","width","label","text","primary","AddRecordToolTip","classes","createOneRecord","newRecord","connect","React","setType","setName","options","value","className","TextField","InputLabelProps","onChange","event","select","option","MenuItem","key","Button","marginRight","setAddRecordTooltip","typeInstance","find","newData","initializeGeocoder","apiKey","maps","createClient","UPDATE_RECORD_TYPE","Map","selected","setSelected","addRecordTooltip","tooltip","geocoder","process","isComputing","window","useWindowSize","viewState","view","setView","layer","scatter","EditableGeoJsonLayer","mode","TranslateMode","selectedFeatureIndexes","filled","stroked","getLineWidth","log","zoom","getRadius","getFillColor","pickable","onEdit","updatedData","editType","reverseGeocode","latlng","error","LineLayer","getSourcePosition","getTargetPosition","getColor","bubble","PolygonLayer","extruded","getPolygon","mapboxApiAccessToken","mapStyle","darkMode","source","source-layer","paint","layers","getCursor","info","coordinate","json","results","formatted_address","object","onDragStart","controller","onViewStateChange","UPDATE_USER","ToggleLabel","status","setStatus","Switch","checked","disabled","SliderLabel","step","Slider","valueLabelDisplay","onChangeCommitted","ControlPanel","paddingTop","title","sliderArray","toggleArray","DELETE_RECORD_TYPE","TypeLabel","updateOneRecordType","updateRecordType","deleteOneRecordType","deleteRecordType","hsl","hex","rgb","icon","Checkbox","canDelete","CREATE_RECORD_TYPE","AddType","useTheme","createOneRecordType","Add","defaultValue","IconButton","newRecordType","create","Done","TypePanel","setRecordTypes","direction","TitlePanel","useTransform","align","paddingRight","div","rotate","margin","KeyboardArrowDown","fontSize","titlePanel","expansion","main","glass","backdropFilter","contents","boxSizing","Sidebar","useSpring","stiffness","mass","o","opacity","controlPanel","bottom","right","href","HelpOutline","GET_MODE","ChangeMode","Visibility","Edit","middlePanel","MiddlePanel","alignContent","wrapper","mainVis","Main","sideBarProps","mapProps","initialStateIndex","sideBar","longitude","latitude","pitch","bearing","defaultTheme","responsiveFontSizes","createMuiTheme","dark","light","secondary","darkTheme","LoadingScreen","CircularProgress","initial","animate","transition","delay","duration","easing","mockRecordType","mockUser","row","StartPanel","setUserId","setRoomId","editable","setEditable","createOneUser","onError","mutationUser","createOneRoom","mutationRoom","onClickHandler","paddingBottom","inputProps","textAlign","Start","Index","opacityInverse","exit","Boolean","location","hostname","match","ReactDOM","render","App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.296b47f6.chunk.js","sourcesContent":["import React from 'react';\nimport './App.css';\nimport { ApolloClient } from 'apollo-client';\nimport { InMemoryCache, NormalizedCacheObject } from 'apollo-cache-inmemory';\nimport { HttpLink } from 'apollo-link-http';\nimport { ApolloProvider } from '@apollo/react-hooks';\nimport Index from './pages/Index';\nimport { hot } from 'react-hot-loader';\n\nconst cache = new InMemoryCache({\n  freezeResults: true\n});\nconst link = new HttpLink({\n  uri: 'http://localhost:4000'\n});\n\nconst client: ApolloClient<NormalizedCacheObject> = new ApolloClient({\n  cache,\n  resolvers: {},\n  link\n});\n\ncache.writeData({\n  data: {\n    session: {\n      userId: '',\n      roomId: '',\n      editMode: false,\n      modifying: false,\n      computing: false,\n      isLoading: true,\n      __typename: 'session'\n    }\n  }\n});\n\nconst App = () => {\n  return (\n    <ApolloProvider client={client}>\n      <Index />\n    </ApolloProvider>\n  );\n};\n\nexport default hot(module)(App);\n","import {\n  EdgeConstructor,\n  NodeConstructor,\n  Edge,\n  Point,\n  AreaConstructor,\n  Node,\n  Area,\n  PointConstructor,\n  AreaDomain,\n  PathConstructor,\n  Path\n} from '../types/Shapes';\n\nconst createPath: PathConstructor = (a: Point[]): Path => ({\n  points: a,\n  getCoordinates: () => a.map(item => [item.lng, item.lat])\n});\n\nconst createEdge: EdgeConstructor = (s: Point, e: Point): Edge => ({\n  start: s,\n  end: e,\n  center: s.add(e).scale(0.5),\n  length: s.getDistance(e),\n  getCorrespondingBuffer: (a: Area, r: number) => {\n    const array: number[] = [];\n\n    const length = s.getDistance(e);\n    const numOfSegments = Math.ceil((length + Number.EPSILON) / (2 * r));\n\n    Array(numOfSegments + 1)\n      .fill(0)\n      .map((item, index) => {\n        const c = s.add(e.sub(s).scale(index / numOfSegments));\n\n        const position = [\n          (c.lng - a.domain.boundary.xMin) / a.domain.cellSize,\n          (c.lat - a.domain.boundary.yMin) / a.domain.cellSize\n        ];\n\n        const diff = r / a.domain.cellSize;\n\n        const [xMin, xMax, yMin, yMax] = [\n          Math.floor(position[0] - diff),\n          Math.ceil(position[0] + diff),\n          Math.floor(position[1] - diff),\n          Math.ceil(position[1] + diff)\n        ];\n\n        const width = xMax - xMin;\n        const height = yMax - yMin;\n\n        Array(width + 1)\n          .fill(0)\n          .map((item, index) => {\n            Array(height + 1)\n              .fill(0)\n              .map((item2, index2) => {\n                array.push(\n                  xMin + index + (yMin + index2) * a.domain.numOfCells[0]\n                );\n                return;\n              });\n            return;\n          });\n        return;\n      });\n\n    return array.filter((item, index, array) => array.indexOf(item) === index);\n  }\n});\n\nconst createNode: NodeConstructor = (c: Point, r?: number): Node => {\n  return {\n    center: c,\n    radius: r ? r : 0.002,\n    getDistanceToEdge: (e: Edge) => {\n      const xC = c.lng - e.start.lng;\n      const yC = c.lat - e.start.lat;\n      const xE = e.end.lng - e.start.lng;\n      const yE = e.end.lat - e.start.lat;\n\n      const dot = xC * xE + yC * yE;\n\n      const param = e.length !== 0 ? dot / Math.pow(e.length, 2) : undefined;\n\n      const point = param\n        ? param < 0\n          ? e.start\n          : param > 1\n          ? e.end\n          : e.start.add(e.end.sub(e.start).scale(param))\n        : undefined;\n\n      return point ? c.getDistance(point) : c.getDistance(e.center);\n    },\n    getCorrespondingBuffer: (a: Area, r: number) => {\n      const array: number[] = [];\n      const position = [\n        (c.lng - a.domain.boundary.xMin) / a.domain.cellSize,\n        (c.lat - a.domain.boundary.yMin) / a.domain.cellSize\n      ];\n\n      const diff = r / a.domain.cellSize;\n\n      const [xMin, xMax, yMin, yMax] = [\n        Math.floor(position[0] - diff),\n        Math.ceil(position[0] + diff),\n        Math.floor(position[1] - diff),\n        Math.ceil(position[1] + diff)\n      ];\n\n      const width = xMax - xMin;\n      const height = yMax - yMin;\n\n      Array(width + 1)\n        .fill(0)\n        .map((item, index) => {\n          Array(height + 1)\n            .fill(0)\n            .map((item2, index2) => {\n              array.push(\n                xMin + index + (yMin + index2) * a.domain.numOfCells[0]\n              );\n              return;\n            });\n          return;\n        });\n\n      return array;\n    }\n  };\n};\n\nconst createArea: AreaConstructor = (d: AreaDomain): Area => {\n  const s = d.numOfCells;\n  const buffer = new Float32Array(s[0] * s[1]);\n  return {\n    buffer: buffer,\n    domain: d,\n    getBuffer: (x: number, y: number) => buffer[x + y * s[0]],\n    setBuffer: (x: number, y: number, v: number) => {\n      buffer[x + y * s[0]] = v;\n    },\n    getPosition: (x: number, y: number) =>\n      createPoint(\n        d.boundary.xMin + d.cellSize * x,\n        d.boundary.yMin + d.cellSize * y\n      )\n  };\n};\n\nconst createPoint: PointConstructor = (x: number, y: number): Point => ({\n  lng: x,\n  lat: y,\n  getDistance: (p: Point) =>\n    Math.sqrt(Math.pow(p.lng - x, 2) + Math.pow(p.lat - y, 2)),\n  scale: (n: number) => createPoint(x * n, y * n),\n  add: (p: Point) => createPoint(x + p.lng, y + p.lat),\n  sub: (p: Point) => createPoint(x - p.lng, y - p.lat)\n});\n\nexport { createEdge, createPath, createPoint, createNode, createArea };\n","import { ShapeConstructor, ShapeSet } from '../types/ShapeSet';\nimport { Node } from '../types/Shapes';\nimport { createNode, createPoint } from './shapeConstructors';\n\nconst createShapeSet: ShapeConstructor = (\n  nodes: Node[],\n  type: 'base' | 'active'\n) => {\n  const activeFunctions =\n    type === 'active'\n      ? {\n          getBoundary: () => [createPoint(5, 5)],\n          getCenter: () =>\n            createPoint(\n              nodes.reduce((prev, curr) => prev + curr.center.lng, 0) /\n                nodes.length,\n              nodes.reduce((prev, curr) => prev + curr.center.lat, 0) /\n                nodes.length\n            )\n        }\n      : undefined;\n\n  const shapeSet = {\n    nodes: nodes.map(item => {\n      const point = createPoint(item.center.lng, item.center.lat);\n      const parentSet = {\n        getDistanceToCenter: activeFunctions\n          ? () => point.getDistance(activeFunctions.getCenter())\n          : undefined\n      };\n      return {\n        ...createNode(point, item.radius),\n        ...parentSet\n      };\n    }),\n    ...activeFunctions\n  } as ShapeSet;\n\n  shapeSet.nodes = shapeSet.nodes.map(item => ({ ...item, parent: shapeSet }));\n  return shapeSet;\n};\n\nexport { createShapeSet };\n","import { Node, Edge } from '../types/Shapes';\nexport const countInterferenceNodes = async (\n  inactiveSetNodes: Node[],\n  edge: Edge\n) => {\n  return inactiveSetNodes.reduce(\n    (prev, curr) =>\n      curr.getDistanceToEdge(edge) < curr.radius ? prev + 1 : prev,\n    0\n  );\n};\n","import { ShapeSetActive } from '../types/ShapeSet';\nimport { Node } from '../types/Shapes';\nimport { createEdge } from '../constructors/shapeConstructors';\nimport { countInterferenceNodes } from './countInterferenceNodes';\n\nexport const getClosestNeightboringNode = async (\n  node: Node,\n  visited: ShapeSetActive,\n  inactiveSetNodes: Node[]\n) =>\n  (\n    await visited.nodes.reduce(\n      async (\n        prev: Promise<{\n          minDistance: number;\n          closestNeighboringNode: Node;\n        }>,\n        curr\n      ) => {\n        const edge = createEdge(node.center, curr.center);\n        const numOfInterferenceNodes = await countInterferenceNodes(\n          inactiveSetNodes,\n          edge\n        );\n        const distance = edge.length;\n        return Math.pow(distance, 2) * Math.pow(numOfInterferenceNodes + 1, 2) <\n          (await prev).minDistance\n          ? {\n              minDistance:\n                Math.pow(distance, 2) * Math.pow(numOfInterferenceNodes + 1, 2),\n              closestNeighboringNode: curr\n            }\n          : prev;\n      },\n      Promise.resolve({\n        minDistance: Number.POSITIVE_INFINITY,\n        closestNeighboringNode: visited.nodes[0]\n      })\n    )\n  ).closestNeighboringNode;\n","import { Node, Edge } from '../types/Shapes';\nexport const getCenterNodeAlongEdge = async (nodes: Node[], edge: Edge) =>\n  (\n    await nodes.reduce(\n      async (\n        _prev: Promise<{\n          minDistanceRatio: number;\n          closestNeighboringNode?: Node;\n        }>,\n        curr: Node\n      ) => {\n        const prev = await _prev;\n        const distanceRatio =\n          (2 * curr.center.getDistance(edge.center)) / edge.length;\n        return distanceRatio < prev.minDistanceRatio\n          ? { minDistanceRatio: distanceRatio, closestNeighboringNode: curr }\n          : prev;\n      },\n      Promise.resolve({\n        minDistanceRatio: 1,\n        closestNeighboringNode: undefined\n      })\n    )\n  ).closestNeighboringNode;\n","import { Node, Edge } from '../types/Shapes';\nexport const rerouteEdgePoint = async (\n  node: Node,\n  buffer: number,\n  edge: Edge,\n  wrapNormal: 1 | -1\n) => {\n  const internalDivision =\n    edge.start.getDistance(node.center) /\n    (edge.start.getDistance(node.center) + edge.end.getDistance(node.center));\n  const closestPointOnEdge = edge.start\n    .scale(1 - internalDivision)\n    .add(edge.end.scale(internalDivision));\n  const newPoint = node.center.add(\n    closestPointOnEdge\n      .sub(node.center)\n      .scale(\n        (wrapNormal * buffer * node.radius) / 2 / node.getDistanceToEdge(edge)\n      )\n  );\n  return newPoint;\n};\n","import { Edge, Point } from '../types/Shapes';\nimport { createNode } from '../constructors/shapeConstructors';\n\nexport const doesPointExist = async (point: Point, edges: Edge[]) => {\n  const node = createNode(point);\n  return edges.reduce((prev: Promise<boolean>, curr: Edge) => {\n    return (\n      prev ||\n      point.getDistance(curr.start) < node.radius ||\n      point.getDistance(curr.end) < node.radius\n    );\n  }, Promise.resolve(false));\n};\n","import { Node, Point } from '../types/Shapes';\nexport const isPointIncluded = async (point: Point, nodes: Node[]) =>\n  await nodes.reduce(\n    (prev: Promise<boolean>, curr: Node) =>\n      prev ||\n      point.getDistance(curr.center) < curr.radius ||\n      point.getDistance(curr.center) < curr.radius,\n    Promise.resolve(false)\n  );\n","import { Node, Edge, Point } from '../types/Shapes';\nimport { createEdge } from '../constructors/shapeConstructors';\nimport { getCenterNodeAlongEdge } from './getCenterNodeAlongEdge';\nimport { rerouteEdgePoint } from './rerouteEdgePoint';\nimport { doesPointExist } from './doesPointExist';\nimport { isPointIncluded } from './isPointIncluded';\nexport const rerouteEdges = async (\n  edgesToCheck: Edge[],\n  inactiveSetNodes: Node[]\n) => {\n  const scannedEdges = [];\n  if (edgesToCheck.length === 0) return;\n  let hasIntersection = true;\n  let iterations = 0;\n  while (hasIntersection && iterations < 100) {\n    hasIntersection = false;\n    while (!hasIntersection && edgesToCheck.length > 0) {\n      iterations += 1;\n      const edge = edgesToCheck.pop();\n      if (!edge) return scannedEdges;\n      const centerNode = await getCenterNodeAlongEdge(inactiveSetNodes, edge);\n      if (!centerNode) {\n        scannedEdges.push(edge);\n        continue;\n      } else {\n        if (centerNode.getDistanceToEdge(edge) > centerNode.radius) {\n          scannedEdges.push(edge);\n          continue;\n        }\n        let tempBufferForMorphing = 1.65;\n        let isExisted: boolean;\n        let isIncluded: boolean;\n        let reroutedPoint: Point;\n        do {\n          tempBufferForMorphing /= 1.1;\n          reroutedPoint = await rerouteEdgePoint(\n            centerNode,\n            tempBufferForMorphing,\n            edge,\n            1\n          );\n          isExisted =\n            (await doesPointExist(reroutedPoint, edgesToCheck)) ||\n            (await doesPointExist(reroutedPoint, scannedEdges));\n          isIncluded = await isPointIncluded(reroutedPoint, inactiveSetNodes);\n        } while (!isExisted && isIncluded && tempBufferForMorphing > 1);\n        if (!isExisted && !isIncluded && reroutedPoint) {\n          edgesToCheck.push(\n            createEdge(edge.start, reroutedPoint),\n            createEdge(reroutedPoint, edge.end)\n          );\n          hasIntersection = true;\n        } else {\n          tempBufferForMorphing = 1.65;\n          do {\n            tempBufferForMorphing /= 1.1;\n            reroutedPoint = await rerouteEdgePoint(\n              centerNode,\n              tempBufferForMorphing,\n              edge,\n              -1\n            );\n            isExisted =\n              (await doesPointExist(reroutedPoint, edgesToCheck)) ||\n              (await doesPointExist(reroutedPoint, scannedEdges));\n            isIncluded = await isPointIncluded(reroutedPoint, inactiveSetNodes);\n          } while (!isExisted && isIncluded && tempBufferForMorphing > 1);\n          if (!isExisted && reroutedPoint) {\n            edgesToCheck.push(\n              createEdge(edge.start, reroutedPoint),\n              createEdge(reroutedPoint, edge.end)\n            );\n            hasIntersection = true;\n          }\n        }\n      }\n    }\n  }\n  while (edgesToCheck.length > 0) {\n    scannedEdges.push(edgesToCheck.pop()!);\n  }\n  while (scannedEdges.length > 0) {\n    const edge1 = scannedEdges.pop()!;\n    if (scannedEdges.length > 0) {\n      const edge2: Edge = scannedEdges.pop()!;\n      const combinedEdge = createEdge(edge1.start, edge2.end);\n      const closestNode = await getCenterNodeAlongEdge(\n        inactiveSetNodes,\n        combinedEdge\n      );\n      if (!closestNode) {\n        scannedEdges.push(combinedEdge);\n      } else {\n        edgesToCheck.push(edge1);\n        scannedEdges.push(edge2);\n      }\n    } else {\n      edgesToCheck.push(edge1);\n    }\n  }\n  return edgesToCheck;\n};\n","import { ShapeSetActive } from '../types/ShapeSet';\nimport { Node, Edge } from '../types/Shapes';\nimport { createShapeSet } from '../constructors/shapeSetConstructor';\nimport { createEdge } from '../constructors/shapeConstructors';\nimport { getClosestNeightboringNode } from './getClosestNeightboringNode';\nimport { rerouteEdges } from './rerouteEdges';\n\nconst connectNodes = async (\n  activeSetNodes: Node[],\n  inactiveSetNodes: Node[]\n): Promise<Edge[]> =>\n  await Promise.all(\n    activeSetNodes\n      .map(\n        async (item: Node, index, array): Promise<Edge[] | undefined> => {\n          const visited = array.slice(0, index);\n          if (visited.length > 0) {\n            const closestNeighboringNode = await getClosestNeightboringNode(\n              item,\n              createShapeSet(visited, 'active') as ShapeSetActive,\n              inactiveSetNodes\n            );\n\n            if (closestNeighboringNode) {\n              const testEdge = createEdge(\n                item.center,\n                closestNeighboringNode.center\n              );\n              const scannedEdges = (await rerouteEdges(\n                [testEdge],\n                inactiveSetNodes\n              )) as Edge[];\n              return scannedEdges;\n            }\n          }\n        }\n      )\n      .flat()\n  );\n\nexport default connectNodes;\n","import { ShapeSetBase, ShapeSetActive, ShapeSet } from '../types/ShapeSet';\nimport { Node } from '../types/Shapes';\nimport connectNodes from './connectNodes';\n\nconst getVirtualEdges = async (\n  activeSet: ShapeSet,\n  inactiveSet: ShapeSetBase\n) => {\n  if (!activeSet.nodes) return [];\n  if (!('getCenter' in activeSet)) return [];\n  activeSet.nodes.sort((a: Node, b: Node) =>\n    a.getDistanceToCenter!() < b.getDistanceToCenter!() ? -1 : 1\n  );\n\n  const scannedEdges = await connectNodes(activeSet.nodes, inactiveSet.nodes);\n  return scannedEdges;\n};\n\nexport default getVirtualEdges;\n","import { AreaDomainConstructor, AreaDomain } from '../types/Shapes';\n\nimport { ShapeSet } from '../types/ShapeSet';\n\nconst createAreaDomain: AreaDomainConstructor = async (\n  s: ShapeSet,\n  c: number\n): Promise<AreaDomain> => {\n  const range = await getRange(s);\n  const cellSize = c;\n  return {\n    cellSize: cellSize,\n    numOfCells: [\n      Math.ceil((range.xMax - range.xMin) / cellSize),\n      Math.ceil((range.yMax - range.yMin) / cellSize)\n    ],\n    boundary: range\n  };\n};\n\nconst getRange = async (set: ShapeSet) => {\n  const range = !set.edges\n    ? {\n        xMin: Math.min(...set.nodes.map(item => item.center.lng)),\n        xMax: Math.max(...set.nodes.map(item => item.center.lng)),\n        yMin: Math.min(...set.nodes.map(item => item.center.lat)),\n        yMax: Math.max(...set.nodes.map(item => item.center.lat))\n      }\n    : {\n        xMin: Math.min(\n          ...set.nodes.map(item => item.center.lng),\n          ...set.edges!.map(item => item.start.lng),\n          ...set.edges!.map(item => item.end.lng)\n        ),\n        xMax: Math.max(\n          ...set.nodes.map(item => item.center.lng),\n          ...set.edges!.map(item => item.start.lng),\n          ...set.edges!.map(item => item.end.lng)\n        ),\n        yMin: Math.min(\n          ...set.nodes.map(item => item.center.lat),\n          ...set.edges!.map(item => item.start.lat),\n          ...set.edges!.map(item => item.end.lat)\n        ),\n        yMax: Math.max(\n          ...set.nodes.map(item => item.center.lat),\n          ...set.edges!.map(item => item.start.lat),\n          ...set.edges!.map(item => item.end.lat)\n        )\n      };\n  const buffer = set.nodes.length > 0 ? set.nodes[0].radius : 0.025;\n  range.xMax += buffer * 3;\n  range.xMin -= buffer * 3;\n  range.yMax += buffer * 3;\n  range.yMin -= buffer * 3;\n  return range;\n};\n\nexport default createAreaDomain;\n","import { contours } from 'd3-contour';\nimport { ShapeSet } from '../types/ShapeSet';\n\nconst getPaths = async (\n  activeSet: ShapeSet,\n  threshold: number\n): Promise<number[][][][]> => {\n  const result = contours()\n    .size(activeSet.area!.domain.numOfCells)\n    .smooth(true)\n    .contour(Array.from(activeSet.area!.buffer) as number[], threshold);\n  return (result.coordinates as unknown) as number[][][][];\n};\nexport default getPaths;\n","import { ShapeSet } from '../types/ShapeSet';\nimport { polygonContains } from 'd3-polygon';\n\nconst isAllContained = async (activeSet: ShapeSet, path: number[][][]) => {\n  return activeSet.nodes.reduce((prev, curr) => {\n    return path.reduce(\n      (prev2, curr2) =>\n        prev2 &&\n        polygonContains(curr2 as [number, number][], [\n          curr.center.lng,\n          curr.center.lat\n        ]),\n      true\n    );\n  }, true);\n};\n\nexport default isAllContained;\n","import { Node, Area, Edge } from '../types/Shapes';\nimport { createPoint, createNode } from '../constructors/shapeConstructors';\nexport const evaluateRepulsion = async (\n  potentialGrid: Area,\n  target: number[],\n  factor: number,\n  r: number,\n  element: Node | Edge\n): Promise<Area> => {\n  const domain = potentialGrid.domain;\n  target.map(async item => {\n    const curr = potentialGrid.buffer[item];\n    const [x, y] = [\n      item % domain.numOfCells[0],\n      Math.floor(item / domain.numOfCells[0])\n    ];\n    const position = potentialGrid.getPosition(x, y);\n    let distance;\n    if ('getDistanceToEdge' in element) {\n      distance = position.getDistance(element.center);\n    } else {\n      distance = createNode(\n        createPoint(position.lng, position.lat)\n      ).getDistanceToEdge(element as Edge);\n    }\n    if (distance < r) {\n      const dr = distance - r;\n      potentialGrid.buffer[item] = curr + factor * Math.pow(dr, 2);\n    } else {\n      potentialGrid.buffer[item] = curr;\n    }\n  });\n  return potentialGrid;\n};\n","import { ShapeSetBase, ShapeSet } from '../types/ShapeSet';\nimport { Area } from '../types/Shapes';\nimport { evaluateRepulsion } from './evaluateRepulsion';\n\nexport const fillPotentialGrid = async (\n  potentialGrid: Area,\n  activeSet: ShapeSet,\n  inactiveSet: ShapeSetBase,\n  parameter: [number, number],\n  factor: [number, number, number]\n) => {\n  if (!activeSet.edges) {\n    return;\n  }\n  const rDiff = parameter[1] - parameter[0];\n  const inverse = Math.pow(rDiff, 2);\n\n  activeSet.edges.map(async item => {\n    const target = item.getCorrespondingBuffer(potentialGrid, rDiff);\n    potentialGrid = await evaluateRepulsion(\n      potentialGrid,\n      target,\n      factor[1] / inverse,\n      parameter[1],\n      item\n    );\n  });\n  potentialGrid.buffer.map(item => item - Number.EPSILON);\n  activeSet.nodes.map(async item => {\n    const target = item.getCorrespondingBuffer(potentialGrid, rDiff);\n    potentialGrid = await evaluateRepulsion(\n      potentialGrid,\n      target,\n      factor[0] / inverse,\n      parameter[1],\n      item\n    );\n  });\n  inactiveSet.nodes.map(async item => {\n    const target = item.getCorrespondingBuffer(potentialGrid, rDiff);\n    potentialGrid = await evaluateRepulsion(\n      potentialGrid,\n      target,\n      factor[2] / inverse,\n      parameter[1],\n      item\n    );\n  });\n  return potentialGrid;\n};\n","import { ShapeSetBase, ShapeSet } from '../types/ShapeSet';\nimport { Path } from '../types/Shapes';\nimport createAreaDomain from '../constructors/areaDomainConstructor';\nimport {\n  createArea,\n  createPoint,\n  createPath\n} from '../constructors/shapeConstructors';\nimport getPaths from './getPaths';\nimport isAllContained from './isAllContained';\nimport { fillPotentialGrid } from './fillPotentialGrid';\n\nexport type Domain = {};\n\nconst getContour = async (\n  activeSet: ShapeSet,\n  inactiveSet: ShapeSetBase,\n  cellSize: number\n): Promise<Path[]> => {\n  const domain = await createAreaDomain(activeSet, cellSize);\n  const potentialGrid = createArea(domain);\n\n  const r0 = cellSize * 2;\n  const r1 = cellSize * 4;\n  let iteration = 0;\n  let threshold = 1;\n  const factorNode = 1;\n  const factorNodeNegative = -0.4;\n  const factorEdge = 1;\n\n  let path: number[][][] | undefined;\n  do {\n    activeSet.area = await fillPotentialGrid(\n      potentialGrid,\n      activeSet,\n      inactiveSet,\n      [r0, r1],\n      [factorNode, factorEdge, factorNodeNegative]\n    );\n    [path] = await getPaths(activeSet, threshold);\n    if (!path) continue;\n\n    threshold *= 0.9;\n    iteration += 1;\n  } while (!(await isAllContained(activeSet, path!)) && iteration < 1);\n\n  return path.map(item => {\n    return createPath(\n      item.map(item2 => {\n        const point = activeSet.area!.getPosition(item2[0], item2[1]);\n        return createPoint(point.lng, point.lat);\n      })\n    );\n  });\n};\n\nexport default getContour;\n","import { gql } from 'apollo-boost';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport { mockRecordType } from '../data/mock';\n\nexport const GET_ROOM = gql`\n  query GetRoom($id: String!) {\n    room(where: { id: $id }) {\n      id\n      recordType(orderBy: { id: asc }) {\n        id\n        name\n        active\n        color\n        record {\n          id\n          lat\n          lng\n          name\n          address\n        }\n      }\n    }\n  }\n`;\n\nexport const GET_CURRENT_ROOM_ID = gql`\n  query {\n    session @client {\n      roomId\n    }\n  }\n`;\n\nexport const CREATE_NEW_ROOM = gql`\n  mutation CreateNewRoom($newData: RoomCreateInput!) {\n    createOneRoom(data: $newData) {\n      id\n      recordType(orderBy: { id: asc }) {\n        id\n        name\n        active\n        color\n        record {\n          id\n          lat\n          lng\n          name\n          address\n        }\n      }\n    }\n  }\n`;\n\nexport const useCurrentRoom = () => {\n  const { data } = useQuery(GET_CURRENT_ROOM_ID);\n\n  return useRoom(data?.session.roomId);\n};\n\nexport const useRoom = (id?: string) => {\n  const { data } = useQuery(GET_ROOM, {\n    variables: { id: id }\n  });\n\n  return data ? data.room : undefined;\n};\n","import { useState, useEffect } from 'react';\nimport { RecordType } from './usePlotData';\nimport { useCurrentRoom } from './useRoom';\n\nconst useFilteredData = () => {\n  const [filtered, setFiltered] = useState<RecordType[]>([]);\n\n  const data = useCurrentRoom();\n\n  useEffect(() => {\n    if (data) {\n      setFiltered(\n        data.recordType.filter((item: { active: any }) => item.active)\n      );\n    }\n  }, [data]);\n\n  return filtered;\n};\n\nexport default useFilteredData;\n","import { gql } from 'apollo-boost';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport { mockUser } from '../data/mock';\n\nexport const GET_USER = gql`\n  query GetUser($id: String!) {\n    user(where: { id: $id }) {\n      id\n      setting {\n        cellSize\n        markSize\n        darkMode\n        scatter\n        edge\n        bubble\n        height\n      }\n    }\n  }\n`;\n\nexport const GET_CURRENT_USER_ID = gql`\n  query {\n    session @client {\n      userId\n    }\n  }\n`;\n\nexport const CREATE_NEW_USER = gql`\n  mutation CreateNewUser($newData: UserCreateInput!) {\n    createOneUser(data: $newData) {\n      id\n      setting {\n        cellSize\n        markSize\n        darkMode\n        scatter\n        edge\n        bubble\n        height\n      }\n    }\n  }\n`;\n\nexport const useCurrentUser = () => {\n  const { data } = useQuery(GET_CURRENT_USER_ID);\n\n  return useUser(data?.session.userId);\n};\n\nexport const useUser = (id?: string) => {\n  const { data } = useQuery(GET_USER, {\n    variables: { id: id }\n  });\n\n  return data;\n};\n","import { gql, ApolloClient } from 'apollo-boost';\nimport { useState, useEffect } from 'react';\nimport { useQuery } from '@apollo/react-hooks';\n\nconst GET_BUSY = gql`\n  query {\n    session @client {\n      editMode\n      computing\n      modifying\n      isLoading\n    }\n  }\n`;\n\nconst useBusy = (type: string) => {\n  const { data } = useQuery(GET_BUSY);\n  const [state, setState] = useState(false);\n\n  useEffect(() => {\n    if (data) {\n      setState(data.session[type]);\n    }\n  }, [data]);\n\n  return state;\n};\n\nexport const changeBusy = (\n  type: string,\n  changeTo: boolean,\n  client: ApolloClient<object>\n) => {\n  const { session } = client.readQuery<any>({ query: GET_BUSY });\n  client.writeQuery({\n    query: GET_BUSY,\n    data: {\n      session: {\n        ...session,\n        [type]: changeTo\n      }\n    }\n  });\n};\n\nexport default useBusy;\n","import { useState, useEffect } from 'react';\nimport getVirtualEdges from '../utils/getVirtualEdges';\nimport { createShapeSet } from '../constructors/shapeSetConstructor';\nimport getContour from '../utils/getContour';\nimport { createNode, createPoint } from '../constructors/shapeConstructors';\nimport { RGBAColor } from 'deck.gl';\nimport { RecordType, Records } from './usePlotData';\nimport useFilteredData from './useFilteredData';\nimport { useCurrentUser } from './useUser';\nimport useBusy, { changeBusy } from './useBusy';\nimport { useApolloClient } from '@apollo/react-hooks';\n\ntype Contours = {\n  contour: [number, number, number][];\n  color: RGBAColor;\n}[];\ntype Edges = {\n  start: [number, number, number];\n  end: [number, number, number];\n  color: RGBAColor;\n}[];\n\nexport type ContoursEdges = {\n  contours?: Contours;\n  edges?: Edges;\n};\n\nconst useContoursEdges = (): ContoursEdges => {\n  const recordTypes = useFilteredData();\n  const client = useApolloClient();\n  const data = useCurrentUser();\n  const isModifying = useBusy('modifying');\n  const [contoursEdges, setContoursEdges] = useState<ContoursEdges>({\n    contours: undefined,\n    edges: undefined\n  });\n\n  useEffect(() => {\n    const f = async () => {\n      if (!recordTypes || !data?.user) {\n        return;\n      }\n      const newContoursEdges = await Promise.all(\n        recordTypes.map(\n          async (\n            item: RecordType,\n            index: number,\n            array: RecordType[]\n          ): Promise<[Contours, Edges]> => {\n            const activeSet = createShapeSet(\n              item.record.map((item: Records[0]) =>\n                createNode(\n                  createPoint(item.lng, item.lat),\n                  data?.user.setting.markSize\n                )\n              ),\n              'active'\n            );\n\n            if (activeSet.nodes.length === 0) {\n              return [[], []];\n            }\n\n            const inactiveSet = createShapeSet(\n              array\n                .filter((item2: RecordType) => item2.name !== item.name)\n                .map(item => item.record)\n                .flat()\n                .map((item: Records[0]) =>\n                  createNode(\n                    createPoint(item.lng, item.lat),\n                    data?.user.setting.markSize\n                  )\n                ),\n              'base'\n            );\n\n            activeSet.edges = (await getVirtualEdges(activeSet, inactiveSet))\n              .flat()\n              .filter(item => item !== undefined);\n\n            const contour = await getContour(\n              activeSet,\n              inactiveSet,\n              data?.user.setting.cellSize * (isModifying ? 2 : 1)\n            );\n\n            return [\n              contour.map(item2 => ({\n                contour: item2\n                  .getCoordinates()\n                  .map(\n                    item =>\n                      [...item, index * (data?.user?.setting.height || 15)] as [\n                        number,\n                        number,\n                        number\n                      ]\n                  ),\n                color: [...item.color, 30] as RGBAColor\n              })),\n              activeSet.edges.map(edge => ({\n                start: [\n                  edge.start.lng,\n                  edge.start.lat,\n                  index * (data?.user?.setting.height || 15)\n                ],\n                end: [\n                  edge.end.lng,\n                  edge.end.lat,\n                  index * (data?.user?.setting.height || 15)\n                ],\n                color: item.color\n              }))\n            ];\n          }\n        )\n      );\n      setContoursEdges({\n        contours: newContoursEdges.flatMap(item => item[0]),\n        edges: newContoursEdges.map(item => item[1]).flat(1)\n      });\n      changeBusy('isLoading', false, client);\n    };\n\n    if (recordTypes) {\n      f();\n    }\n  }, [recordTypes, data?.user, isModifying]);\n\n  return contoursEdges;\n};\n\nexport default useContoursEdges;\n","import { RGBAColor } from 'deck.gl';\nimport { useState, useEffect } from 'react';\nimport useFilteredData from './useFilteredData';\nimport { useCurrentUser } from './useUser';\n\ntype Feature = {\n  type: string;\n  properties: {\n    id: number;\n    fillColor: RGBAColor;\n    markSize: string;\n  };\n  geometry: {\n    type: string;\n    coordinates: [number, number];\n  };\n};\n\nexport type Scatters = {\n  type: string;\n  features?: Feature[];\n};\n\nconst useScatters = (): Scatters | undefined => {\n  const recordTypes = useFilteredData();\n  const data = useCurrentUser();\n  const [scatters, setScatters] = useState<Scatters | undefined>(undefined);\n\n  useEffect(() => {\n    const f = async () => {\n      if (!recordTypes) {\n        return;\n      }\n      const newRecordTypes = recordTypes\n        .map((item, index) =>\n          item.record.map(record => ({\n            type: 'Feature',\n            properties: {\n              id: record.id,\n              fillColor: item.color,\n              type: item.name,\n              typeId: item.id,\n              name: record.name,\n              address: record.address\n            },\n            geometry: {\n              type: 'Point',\n              coordinates: [\n                record.lng,\n                record.lat,\n                index * (data?.user?.setting.height || 15)\n              ]\n            }\n          }))\n        )\n        .flat(2);\n      setScatters({\n        type: 'FeatureCollection',\n        features: newRecordTypes\n      });\n    };\n    if (recordTypes) {\n      f();\n    }\n  }, [recordTypes, data?.user]);\n\n  return scatters;\n};\n\nexport default useScatters;\n","import useContoursEdges, { ContoursEdges } from './useContoursEdges';\nimport { useState, useEffect } from 'react';\nimport { useApolloClient } from '@apollo/react-hooks';\nimport useScatters, { Scatters } from './useScatters';\nimport { changeBusy } from './useBusy';\n\ntype PlotData = ContoursEdges & {\n  scatters?: Scatters;\n};\n\nexport type RecordType = {\n  id: number;\n  record: Records;\n  name: string;\n  color: [number, number, number];\n  active: boolean;\n};\n\nexport type Records = {\n  id: number;\n  lng: number;\n  lat: number;\n  name: string;\n  address: string;\n}[];\n\nconst usePlotData = (): PlotData => {\n  const client = useApolloClient();\n  const [plotData, setPlotData] = useState<PlotData>({});\n\n  const contoursEdges = useContoursEdges();\n  const scatters = useScatters();\n\n  useEffect(() => {\n    setPlotData({\n      contours: contoursEdges.contours,\n      edges: contoursEdges.edges,\n      scatters: scatters\n    });\n    changeBusy('computing', false, client);\n  }, [contoursEdges, scatters]);\n\n  return plotData;\n};\n\nexport default usePlotData;\n","const getIcon: { [name: string]: string } = {\n  foodMarket: 'store',\n  busStop: 'directionsBus',\n  restaurant: 'restaurantMenu',\n  medicalClinic: 'hotel'\n};\n\nexport default getIcon;\n","import React, { Dispatch, SetStateAction } from 'react';\nimport {\n  Card,\n  Grid,\n  Typography,\n  ButtonBase,\n  Divider,\n  Icon\n} from '@material-ui/core';\nimport getIcon from '../../utils/getIcon';\nimport camelcase from 'camelcase';\nimport { DeleteForever } from '@material-ui/icons';\nimport { gql } from 'apollo-boost';\nimport { useCurrentRoom, GET_ROOM } from '../../uses/useRoom';\nimport { useMutation } from '@apollo/react-hooks';\n\nexport type ToolTipProps = {\n  id: number;\n  type: string;\n  name: string;\n  address: string;\n  x: number;\n  y: number;\n  setTooltip: Dispatch<SetStateAction<ToolTipProps | undefined>>;\n};\n\nexport const DELETE_RECORD = gql`\n  mutation DeleteRecord($where: RecordWhereUniqueInput!) {\n    deleteOneRecord(where: $where) {\n      id\n      name\n      lat\n      lng\n      address\n    }\n  }\n`;\n\nconst ToolTip: React.FC<ToolTipProps> = (props: ToolTipProps) => {\n  const currentRoom = useCurrentRoom();\n  const [mutation] = useMutation(DELETE_RECORD, {\n    update: (cache, { data: { deleteOneRecord } }) => {\n      const { room } = cache.readQuery<any>({\n        query: GET_ROOM,\n        variables: { id: currentRoom.id }\n      });\n\n      const typeIndex = room.recordType.findIndex(\n        (item: any) => item.name === props.type\n      );\n\n      const newRoom = {\n        ...room,\n        recordType: [\n          ...room.recordType.filter(\n            (item: any, index: any) => index !== typeIndex\n          ),\n          {\n            ...room.recordType[typeIndex],\n            record: room.recordType[typeIndex].record\n              .filter((item: { id: number }) => item.id !== props.id)\n              .sort((a: { id: number }, b: { id: number }) =>\n                a.id < b.id ? -1 : 1\n              )\n          }\n        ].sort((a, b) => (a.id < b.id ? -1 : 1))\n      };\n\n      cache.writeQuery({\n        query: GET_ROOM,\n        variables: {\n          id: currentRoom.id\n        },\n        data: {\n          room: newRoom\n        }\n      });\n    }\n  });\n\n  const onClick = () => {\n    mutation({\n      variables: {\n        where: {\n          id: props.id\n        }\n      }\n    });\n    props.setTooltip(undefined);\n  };\n\n  if (!props.name) return null;\n  return (\n    <Card\n      style={{\n        maxWidth: '20rem',\n        position: 'absolute',\n        zIndex: 7,\n        top: props.y,\n        left: props.x\n      }}\n    >\n      <Grid\n        container\n        item\n        xs={12}\n        style={{\n          padding: '0.3rem'\n        }}\n      >\n        <Grid container item xs={2} alignItems={'center'} justify={'center'}>\n          <Icon>{getIcon[camelcase(props.type)] || 'place'}</Icon>\n        </Grid>\n        <Grid container item xs={9} alignItems={'center'}>\n          <Typography variant={'h6'}>{props.name}</Typography>\n        </Grid>\n        <Grid container item xs={1} alignItems={'center'}>\n          <ButtonBase onClick={onClick}>\n            <DeleteForever color={'error'} />\n          </ButtonBase>\n        </Grid>\n      </Grid>\n      <Divider />\n      <Grid\n        container\n        item\n        xs={12}\n        style={{\n          padding: '0.3rem'\n        }}\n      >\n        <Typography variant={'body1'}>{props.address}</Typography>\n      </Grid>\n    </Card>\n  );\n};\n\nexport default ToolTip;\n","import { ApolloClient } from 'apollo-boost';\nimport { GET_ROOM } from '../uses/useRoom';\n\ntype UpdateVisData = {\n  roomId: number;\n  id: number;\n  type: string;\n  lat: number;\n  lng: number;\n};\n\nconst updateVis = (data: UpdateVisData, client: ApolloClient<object>) => {\n  const { room } = client.readQuery<any>({\n    query: GET_ROOM,\n    variables: { id: data.roomId }\n  });\n  const typeIndex = room.recordType.findIndex(\n    (item: any) => item.name === data.type\n  );\n  const recordIndex = room.recordType[typeIndex].record.findIndex(\n    (item: any) => item.id === data.id\n  );\n\n  const newElement = {\n    ...room.recordType[typeIndex].record[recordIndex],\n    lat: data.lat,\n    lng: data.lng\n  };\n\n  const newRoom = {\n    ...room,\n    recordType: [\n      ...room.recordType.filter((item: any, index: any) => index !== typeIndex),\n      {\n        ...room.recordType[typeIndex],\n        record: [\n          ...room.recordType[typeIndex].record.filter(\n            (item: any, index: any) => index !== recordIndex\n          ),\n          newElement\n        ].sort((a, b) => (a.id < b.id ? -1 : 1))\n      }\n    ].sort((a, b) => (a.id < b.id ? -1 : 1))\n  };\n\n  client.writeQuery({\n    query: GET_ROOM,\n    data: {\n      room: newRoom\n    }\n  });\n};\n\nexport default updateVis;\n","import React, { SetStateAction, Dispatch } from 'react';\nimport {\n  Card,\n  Grid,\n  Divider,\n  TextField,\n  MenuItem,\n  Button,\n  useTheme,\n  Paper,\n  makeStyles,\n  Theme\n} from '@material-ui/core';\nimport { useCurrentRoom, GET_ROOM } from '../../uses/useRoom';\nimport { gql } from 'apollo-boost';\nimport { useMutation } from '@apollo/react-hooks';\n\nexport type AddRecordToolTipProps = {\n  address: string;\n  x: number;\n  y: number;\n  lat: number;\n  lng: number;\n  setAddRecordTooltip: Dispatch<\n    SetStateAction<AddRecordToolTipProps | undefined>\n  >;\n};\n\nexport const CREATE_RECORD = gql`\n  mutation CreateRecord($newData: RecordCreateInput!) {\n    createOneRecord(data: $newData) {\n      id\n      name\n      lat\n      lng\n      address\n    }\n  }\n`;\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  card: {\n    backgroundColor: theme.palette.background.default,\n    width: '15rem',\n    position: 'absolute',\n    padding: '0.6rem 0.8rem 0.8rem 0.8rem',\n    zIndex: 700,\n    top: (props: any) => props.y,\n    left: (props: any) => props.x\n  },\n  label: {\n    color: theme.palette.text.primary\n  }\n}));\n\nconst AddRecordToolTip: React.FC<AddRecordToolTipProps> = (\n  props: AddRecordToolTipProps\n) => {\n  const classes = useStyles(props);\n  const currentRoom = useCurrentRoom();\n  const [mutation] = useMutation(CREATE_RECORD, {\n    update: (cache, { data: { createOneRecord } }) => {\n      const { room } = cache.readQuery<any>({\n        query: GET_ROOM,\n        variables: { id: currentRoom.id }\n      });\n\n      const typeIndex = room.recordType.findIndex(\n        (item: any) => item.name === type\n      );\n      const newRecord = {\n        ...createOneRecord,\n        type: { connect: { id: room.recordType[typeIndex].id } }\n      };\n\n      const newRoom = {\n        ...room,\n        recordType: [\n          ...room.recordType.filter(\n            (item: any, index: any) => index !== typeIndex\n          ),\n          {\n            ...room.recordType[typeIndex],\n            record: [\n              ...room.recordType[typeIndex].record,\n              newRecord\n            ].sort((a, b) => (a.id < b.id ? -1 : 1))\n          }\n        ].sort((a, b) => (a.id < b.id ? -1 : 1))\n      };\n\n      cache.writeQuery({\n        query: GET_ROOM,\n        variables: {\n          id: currentRoom.id\n        },\n        data: {\n          room: newRoom\n        }\n      });\n    }\n  });\n  const [type, setType] = React.useState('');\n  const [name, setName] = React.useState('');\n  if (!props.address || !currentRoom) return null;\n\n  const options = currentRoom?.recordType.map((item: any) => ({\n    value: item.name\n  }));\n\n  if (!options) return null;\n\n  const onChangeInput = (event: any) => {\n    setName(event.target.value);\n  };\n  const onChangeSelect = (event: any) => {\n    setType(event.target.value);\n  };\n\n  const addRecord = () => {\n    const typeInstance = currentRoom?.recordType.find(\n      (item: any) => item.name === type\n    );\n    if (!typeInstance) return;\n    const newRecord = {\n      address: props.address,\n      lat: props.lat,\n      lng: props.lng,\n      name: name,\n      type: { connect: { id: typeInstance.id } }\n    };\n    mutation({\n      variables: {\n        newData: newRecord\n      }\n    });\n    props.setAddRecordTooltip(undefined);\n    setName('');\n  };\n\n  return (\n    <Card className={classes.card}>\n      <Grid container item xs={12}>\n        <Grid\n          container\n          item\n          xs={12}\n          alignItems={'center'}\n          style={{\n            padding: '0.6rem'\n          }}\n        >\n          <TextField\n            color={'secondary'}\n            style={{\n              width: '15rem'\n            }}\n            InputLabelProps={{ className: classes.label }}\n            label=\"Add Record\"\n            value={name}\n            onChange={onChangeInput}\n          />\n        </Grid>\n      </Grid>\n      <Divider />\n      <Grid\n        container\n        item\n        xs={12}\n        style={{\n          padding: '0.6rem'\n        }}\n      >\n        <TextField\n          color={'secondary'}\n          select\n          label=\"Select Type\"\n          InputLabelProps={{ className: classes.label }}\n          value={type}\n          onChange={onChangeSelect}\n          style={{\n            width: '15rem'\n          }}\n        >\n          {options.map((option: any) => (\n            <MenuItem key={option.value} value={option.value}>\n              {option.value}\n            </MenuItem>\n          ))}\n        </TextField>\n      </Grid>\n      <Grid\n        container\n        item\n        xs={12}\n        justify={'flex-end'}\n        style={{\n          padding: '0.6rem'\n        }}\n      >\n        <Button\n          style={{ marginRight: '0.5rem' }}\n          variant={'outlined'}\n          color={'secondary'}\n          onClick={() => props.setAddRecordTooltip(undefined)}\n        >\n          Cancel\n        </Button>\n        <Button variant={'contained'} color={'primary'} onClick={addRecord}>\n          Add\n        </Button>\n      </Grid>\n    </Card>\n  );\n};\n\nexport default AddRecordToolTip;\n","import maps from '@google/maps';\n\nconst initializeGeocoder = (apiKey: string) => {\n  const geocoder = maps.createClient({\n    key: apiKey,\n    Promise: Promise\n  });\n\n  return geocoder;\n};\n\nexport default initializeGeocoder;\n","import React, { useState, useEffect } from 'react';\nimport DeckGL from '@deck.gl/react';\nimport ReactMapGL, { Layer } from 'react-map-gl';\n\nimport { PolygonLayer, LineLayer } from 'deck.gl';\nimport { useWindowSize } from 'react-use';\nimport usePlotData from '../../uses/usePlotData';\nimport { useCurrentUser } from '../../uses/useUser';\nimport { useApolloClient, useMutation } from '@apollo/react-hooks';\nimport { EditableGeoJsonLayer, TranslateMode } from 'nebula.gl';\nimport { Scatters } from '../../uses/useScatters';\nimport useBusy, { changeBusy } from '../../uses/useBusy';\nimport ToolTip, { ToolTipProps } from '../molecules/ToolTip';\nimport updateVis from '../../utils/updateVis';\nimport { useCurrentRoom } from '../../uses/useRoom';\nimport AddRecordToolTip, {\n  AddRecordToolTipProps\n} from '../molecules/AddRecordToolTip';\nimport initializeGeocoder from '../../utils/geocoder';\nimport { gql } from 'apollo-boost';\n\nexport type MapProps = {\n  viewState: {\n    longitude: number;\n    latitude: number;\n    zoom: number;\n    pitch: number;\n    bearing: number;\n  };\n};\n\nexport const UPDATE_RECORD_TYPE = gql`\n  mutation UpdateRecord($newData: RecordUpdateInput!, $id: Int!) {\n    updateOneRecord(data: $newData, where: { id: $id }) {\n      id\n      name\n      address\n      lat\n      lng\n      type {\n        id\n      }\n    }\n  }\n`;\n\nconst MAPBOX_TOKEN =\n  'pk.eyJ1Ijoia2VtYWtpbm8iLCJhIjoiY2s1aHJkeWVpMDZzbDNubzltem80MGdnZSJ9.Mn_8DItICHFJyiPJ2rP_0Q';\n\nconst Map = (props: MapProps) => {\n  const plotData = usePlotData();\n  const [scatters, setScatters] = useState<Scatters | undefined>(undefined);\n  const [selected, setSelected] = useState(-1);\n  const [addRecordTooltip, setAddRecordTooltip] = useState<\n    AddRecordToolTipProps\n  >();\n  const [mutation] = useMutation(UPDATE_RECORD_TYPE);\n  const [tooltip, setTooltip] = useState<ToolTipProps>();\n  const data = useCurrentUser();\n  const room = useCurrentRoom();\n  const geocoder = initializeGeocoder(process.env.REACT_APP_MAP_API_KEY!);\n\n  const client = useApolloClient();\n  const editMode = useBusy('editMode');\n  const isModifying = useBusy('modifying');\n  const isComputing = useBusy('computing');\n\n  const window = useWindowSize();\n\n  const [view, setView] = React.useState(props.viewState);\n\n  useEffect(() => {\n    setScatters(plotData?.scatters);\n  }, [plotData]);\n\n  useEffect(() => {\n    if (editMode === false) {\n      setSelected(-1);\n    }\n  }, [editMode]);\n\n  const layer = [\n    data?.user?.setting.scatter\n      ? new EditableGeoJsonLayer({\n          id: 'geojsonLayer',\n          data: scatters,\n          mode: TranslateMode,\n          selectedFeatureIndexes: [selected],\n          filled: true,\n          stroked: true,\n          getLineWidth: 5 / Math.log(view.zoom),\n          getRadius: data?.user?.setting.markSize * 25000 || 40,\n          getFillColor: (d: any) =>\n            d.properties.fillColor\n              ? d.properties.fillColor\n              : [125, 255, 255, 255],\n          pickable: true,\n          onEdit: ({ updatedData, editType }: any) => {\n            if (editType === 'translating' && !isModifying) {\n              changeBusy('modifying', true, client);\n            }\n            if (!isComputing) {\n              const record = updatedData.features[selected];\n              updateVis(\n                {\n                  roomId: room.id,\n                  id: record.properties.id,\n                  type: record.properties.type,\n                  lat: record.geometry.coordinates[1],\n                  lng: record.geometry.coordinates[0]\n                },\n                client\n              );\n            }\n            if (editType === 'translated') {\n              changeBusy('modifying', false, client);\n              const record = updatedData.features[selected];\n              geocoder.reverseGeocode(\n                {\n                  latlng: {\n                    lat: record.geometry.coordinates[1],\n                    lng: record.geometry.coordinates[0]\n                  }\n                },\n                (error: any, result: any) => {\n                  mutation({\n                    variables: {\n                      newData: {\n                        lat: record.geometry.coordinates[1],\n                        lng: record.geometry.coordinates[0],\n                        name: record.properties.name,\n                        address: record.properties.address,\n                        type: { connect: { id: record.properties.typeId } }\n                      },\n                      id: record.properties.id\n                    }\n                  });\n                }\n              );\n            }\n            setScatters(updatedData);\n          }\n        })\n      : undefined,\n    data?.user?.setting.edge\n      ? new LineLayer({\n          id: 'lineLayer',\n          data: plotData.edges!,\n          getSourcePosition: (d: { start: any }) => d.start,\n          getTargetPosition: (d: { end: any }) => d.end,\n          getColor: (d: { color: any }) => d.color\n        })\n      : undefined,\n    data?.user?.setting.bubble\n      ? new PolygonLayer({\n          id: 'polygonLayer',\n          data: plotData.contours!,\n          extruded: false,\n          stroked: true,\n          getPolygon: (d: { contour: any }) => d.contour,\n          getFillColor: (d: { color: any }) => d.color\n        })\n      : undefined\n  ].filter(item => item !== undefined) as any[];\n\n  const background = (\n    <ReactMapGL\n      mapboxApiAccessToken={MAPBOX_TOKEN}\n      width={window.width}\n      height={window.height}\n      mapStyle={\n        data?.user\n          ? data?.user.setting.darkMode\n            ? 'mapbox://styles/mapbox/dark-v10'\n            : 'mapbox://styles/mapbox/light-v10'\n          : 'mapbox://styles/mapbox/light-v10'\n      }\n    >\n      <Layer\n        id={'height'}\n        type={'fill-extrusion'}\n        source={'composite'}\n        source-layer={'building'}\n        paint={{\n          'fill-extrusion-color': '#aaa',\n          'fill-extrusion-height': [\n            'interpolate',\n            ['linear'],\n            ['zoom'],\n            15,\n            0,\n            15.05,\n            ['get', 'height']\n          ],\n          'fill-extrusion-base': [\n            'interpolate',\n            ['linear'],\n            ['zoom'],\n            15,\n            0,\n            15.05,\n            ['get', 'min_height']\n          ],\n          'fill-extrusion-opacity': 0.6\n        }}\n      />\n    </ReactMapGL>\n  );\n\n  return (\n    <>\n      <ToolTip {...(tooltip as ToolTipProps)} />\n      <AddRecordToolTip {...(addRecordTooltip as AddRecordToolTipProps)} />\n      <DeckGL\n        width={window.width}\n        height={window.height}\n        viewState={view}\n        layers={layer}\n        getCursor={() => (editMode ? 'crosshair' : 'pointer')}\n        onClick={\n          editMode\n            ? (info: any) => {\n                setSelected(info.index);\n                if (info.index === -1 && !addRecordTooltip) {\n                  geocoder.reverseGeocode(\n                    {\n                      latlng: {\n                        lat: info.coordinate[1],\n                        lng: info.coordinate[0]\n                      }\n                    },\n                    (error: any, result: any) => {\n                      setAddRecordTooltip({\n                        address: result.json.results[0].formatted_address,\n                        x: info.x + 16,\n                        y: info.y + 16,\n                        lat: info.coordinate[1],\n                        lng: info.coordinate[0],\n                        setAddRecordTooltip: setAddRecordTooltip\n                      });\n                    }\n                  );\n                }\n              }\n            : (info: any) => {\n                setAddRecordTooltip(undefined);\n                if (info.object?.properties?.type) {\n                  setTooltip({\n                    id: info.object.properties.id,\n                    type: info.object.properties.type,\n                    name: info.object.properties.name,\n                    address: info.object.properties.address,\n                    x: info.x + 16,\n                    y: info.y + 16,\n                    setTooltip: setTooltip\n                  });\n                } else {\n                  setTooltip(undefined);\n                }\n              }\n        }\n        onDragStart={() => setTooltip(undefined)}\n        controller={!editMode && true}\n        onViewStateChange={({ viewState }) => setView(viewState)}\n      >\n        {background}\n      </DeckGL>\n    </>\n  );\n};\n\nexport default Map;\n","import React, { useState, useEffect } from 'react';\nimport { Grid } from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\n\nimport Switch from '@material-ui/core/Switch';\nimport { gql } from 'apollo-boost';\nimport { useMutation } from '@apollo/react-hooks';\nimport { useCurrentUser } from '../../uses/useUser';\nimport camelcase from 'camelcase';\n\nexport type ToggleLabelProps = { label: string };\n\nexport const UPDATE_USER = gql`\n  mutation UpdateUser($newData: UserUpdateInput!, $id: String!) {\n    updateOneUser(data: $newData, where: { id: $id }) {\n      id\n      setting {\n        darkMode\n        height\n        cellSize\n        markSize\n        scatter\n        edge\n        bubble\n      }\n    }\n  }\n`;\n\nconst ToggleLabel: React.FC<ToggleLabelProps> = (props: ToggleLabelProps) => {\n  const data = useCurrentUser();\n  const [status, setStatus] = useState<[boolean, boolean]>([false, false]);\n  const [mutation] = useMutation(UPDATE_USER);\n\n  useEffect(() => {\n    if (data?.user) {\n      setStatus([data?.user?.setting[camelcase(props.label)], true]);\n    }\n  }, [data]);\n\n  const onChange = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    checked: boolean\n  ) => {\n    setStatus([checked, false]);\n    mutation({\n      variables: {\n        newData: { setting: { update: { [camelcase(props.label)]: checked } } },\n        id: data?.user.id\n      }\n    });\n  };\n\n  return (\n    <Grid\n      container\n      item\n      xs={12}\n      style={{ height: '3rem' }}\n      alignItems={'center'}\n    >\n      <Grid item xs={10}>\n        <Typography variant=\"body1\">{props.label}</Typography>\n      </Grid>\n      <Grid item xs={2}>\n        <Switch checked={status[0]} disabled={!status[1]} onChange={onChange} />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ToggleLabel;\n","import React, { useState, useEffect, ChangeEvent } from 'react';\nimport { Grid } from '@material-ui/core';\n\nimport Typography from '@material-ui/core/Typography';\nimport { Slider as SliderMUI } from '@material-ui/core';\nimport { useCurrentUser } from '../../uses/useUser';\nimport { useMutation } from '@apollo/react-hooks';\nimport { UPDATE_USER } from './ToggleLabel';\nimport camelcase from 'camelcase';\n\nexport type SliderLabelProps = { label: string };\n\nconst SliderLabel: React.FC<SliderLabelProps> = (props: SliderLabelProps) => {\n  const data = useCurrentUser();\n  const [status, setStatus] = useState<[number, boolean]>([0, false]);\n  const [mutation] = useMutation(UPDATE_USER);\n\n  useEffect(() => {\n    if (data?.user) {\n      setStatus([data?.user.setting[camelcase(props.label)], true]);\n    }\n  }, [data?.user]);\n\n  const onChange = (event: ChangeEvent<{}>, value: number | number[]) => {\n    setStatus([value as number, true]);\n  };\n\n  const onChangeCommitted = (\n    event: ChangeEvent<{}>,\n    value: number | number[]\n  ) => {\n    setStatus([value as number, false]);\n    mutation({\n      variables: {\n        newData: { setting: { update: { [camelcase(props.label)]: value } } },\n        id: data?.user.id\n      }\n    });\n  };\n\n  const range =\n    props.label === 'Mark Size'\n      ? { max: 0.008, min: 0.0005, step: 0.0005 }\n      : props.label === 'Cell Size'\n      ? { max: 0.002, min: 0.00025, step: 0.00025 }\n      : { max: 100, min: 0, step: 5 };\n\n  return (\n    <Grid\n      container\n      item\n      xs={12}\n      style={{ height: '3rem' }}\n      alignItems={'center'}\n    >\n      <Grid xs={4}>\n        <Typography variant={'body1'}>{props.label}</Typography>\n      </Grid>\n      <Grid xs={8}>\n        <SliderMUI\n          value={status[0]}\n          disabled={!status[1]}\n          valueLabelDisplay={'auto'}\n          onChange={onChange}\n          onChangeCommitted={onChangeCommitted}\n          {...range}\n        />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default SliderLabel;\n","import React from 'react';\nimport SliderLabel, { SliderLabelProps } from '../atoms/SliderLabel';\nimport { Grid, Typography } from '@material-ui/core';\nimport ToggleLabel, { ToggleLabelProps } from '../atoms/ToggleLabel';\nimport Divider from '@material-ui/core/Divider';\n\nexport type ControlPanelProps = {\n  title: string;\n  sliderArray: SliderLabelProps[];\n  toggleArray: ToggleLabelProps[];\n};\n\nconst ControlPanel: React.FC<ControlPanelProps> = (\n  props: ControlPanelProps\n) => {\n  return (\n    <Grid style={{ paddingTop: '2rem' }}>\n      <Typography variant=\"h6\">{props.title}</Typography>\n      <Divider />\n      {props.sliderArray.map(item => (\n        <SliderLabel label={item.label}></SliderLabel>\n      ))}\n      {props.toggleArray.map(item => (\n        <ToggleLabel label={item.label} />\n      ))}\n    </Grid>\n  );\n};\n\nexport default ControlPanel;\n","import React, { ChangeEvent, useState, useEffect } from 'react';\nimport {\n  Grid,\n  Checkbox,\n  Icon,\n  Typography,\n  ButtonBase\n} from '@material-ui/core';\nimport { gql } from 'apollo-boost';\nimport { useMutation } from '@apollo/react-hooks';\nimport { GET_ROOM, useCurrentRoom } from '../../uses/useRoom';\nimport { rgb, hsl } from 'color-convert';\nimport { useCurrentUser } from '../../uses/useUser';\nimport { DeleteForever } from '@material-ui/icons';\n\nexport type TypeLabelProps = {\n  id: number;\n  icon: string;\n  label: string;\n  color?: number[];\n  active: boolean;\n  canDelete: boolean;\n};\n\nexport const UPDATE_RECORD_TYPE = gql`\n  mutation UpdateBoolean($newData: RecordTypeUpdateInput!, $id: Int!) {\n    updateOneRecordType(data: $newData, where: { id: $id }) {\n      id\n      name\n      color\n      active\n    }\n  }\n`;\n\nexport const DELETE_RECORD_TYPE = gql`\n  mutation DeleteRecordType($where: RecordTypeWhereUniqueInput!) {\n    deleteOneRecordType(where: $where) {\n      id\n    }\n  }\n`;\n\nconst TypeLabel: React.FC<TypeLabelProps> = (props: TypeLabelProps) => {\n  const data = useCurrentUser();\n  const currentRoom = useCurrentRoom();\n  const [updateRecordType] = useMutation(UPDATE_RECORD_TYPE, {\n    update: (cache, { data: { updateOneRecordType } }) => {\n      const { room } = cache.readQuery<any>({\n        query: GET_ROOM,\n        variables: { id: currentRoom.id }\n      });\n      cache.writeQuery({\n        query: GET_ROOM,\n        data: {\n          room: {\n            ...room,\n            recordType: [\n              ...room.recordType.filter(\n                (item: any) => item.id !== updateOneRecordType.id\n              ),\n              updateOneRecordType\n            ].sort((a, b) => (a.id < b.id ? -1 : 1))\n          }\n        }\n      });\n    }\n  });\n  const [deleteRecordType] = useMutation(DELETE_RECORD_TYPE, {\n    update: (cache, { data: { deleteOneRecordType } }) => {\n      const { room } = cache.readQuery<any>({\n        query: GET_ROOM,\n        variables: { id: currentRoom.id }\n      });\n      cache.writeQuery({\n        query: GET_ROOM,\n        data: {\n          room: {\n            ...room,\n            recordType: [\n              ...room.recordType.filter(\n                (item: any) => item.id !== deleteOneRecordType.id\n              )\n            ].sort((a, b) => (a.id < b.id ? -1 : 1))\n          }\n        }\n      });\n    }\n  });\n  const [status, setStatus] = useState<[boolean, boolean]>([false, false]);\n\n  useEffect(() => {\n    if (props) {\n      setStatus([props.active, true]);\n    }\n  }, [props]);\n\n  const onChange = (event: ChangeEvent<HTMLInputElement>, checked: boolean) => {\n    setStatus([checked, false]);\n    updateRecordType({\n      variables: {\n        newData: { active: checked },\n        id: props.id\n      }\n    });\n  };\n\n  const color = props.color\n    ? '#' +\n      hsl.hex(\n        rgb\n          .hsl(props.color)\n          .map((item: number, index: number) =>\n            index === 2\n              ? item - 10 * (data?.user?.setting.darkMode ? -1 : 1)\n              : item\n          )\n      )\n    : '#aaaaaa';\n\n  const onClick = () => {\n    deleteRecordType({\n      variables: {\n        where: { id: props.id }\n      }\n    });\n  };\n\n  return (\n    <Grid\n      style={{\n        height: '3rem',\n        color: color\n      }}\n      container\n      item\n      xs={12}\n    >\n      <Grid container item xs={2} alignItems={'center'}>\n        <Icon>{props.icon || 'place'}</Icon>\n      </Grid>\n      <Grid\n        container\n        item\n        xs={10}\n        justify={'space-between'}\n        alignItems={'center'}\n      >\n        <Typography variant={'body1'}>{props.label}</Typography>\n        <Grid item>\n          <Checkbox\n            style={{\n              color: color\n            }}\n            checked={status[0]}\n            disabled={!status[1]}\n            onChange={onChange}\n          />\n          {props.icon === undefined && props.canDelete === true ? (\n            <ButtonBase onClick={onClick} style={{ padding: '9px 9px 9px 0' }}>\n              <DeleteForever color={'error'} />\n            </ButtonBase>\n          ) : null}\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default TypeLabel;\n","import React, { useState } from 'react';\nimport { Add, Done } from '@material-ui/icons';\nimport { Grid, useTheme, TextField, IconButton } from '@material-ui/core';\nimport { useCurrentRoom, GET_ROOM } from '../../uses/useRoom';\nimport { useMutation } from '@apollo/react-hooks';\nimport { gql } from 'apollo-boost';\n\nexport type AddTypeProps = {};\n\nexport const CREATE_RECORD_TYPE = gql`\n  mutation CreateRecordType($newData: RecordTypeCreateInput!) {\n    createOneRecordType(data: $newData) {\n      id\n      name\n      active\n      color\n      record {\n        id\n        name\n        lat\n        lng\n        address\n      }\n    }\n  }\n`;\n\nconst AddType: React.FC<AddTypeProps> = () => {\n  const theme = useTheme();\n  const currentRoom = useCurrentRoom();\n  const [name, setName] = useState<string>('');\n  const [mutation] = useMutation(CREATE_RECORD_TYPE, {\n    update: (cache, { data: { createOneRecordType } }) => {\n      const { room } = cache.readQuery<any>({\n        query: GET_ROOM,\n        variables: { id: currentRoom.id }\n      });\n      cache.writeQuery({\n        query: GET_ROOM,\n        data: {\n          room: {\n            ...room,\n            recordType: [...room.recordType, createOneRecordType].sort((a, b) =>\n              a.id < b.id ? -1 : 1\n            )\n          }\n        }\n      });\n    }\n  });\n\n  const onClick = () => {\n    if (!currentRoom) return;\n\n    const newRecordType = {\n      active: true,\n      name: name || 'no name',\n      room: { connect: { id: currentRoom.id } },\n      record: { create: [] }\n    };\n    mutation({\n      variables: {\n        newData: newRecordType\n      }\n    });\n  };\n\n  const onChange = (event: any) => {\n    setName(event.target.value);\n  };\n\n  return (\n    <Grid\n      style={{\n        height: '3rem',\n        color: theme.palette.text.primary\n      }}\n      container\n      item\n      xs={12}\n    >\n      <Grid container item xs={2} alignItems={'center'}>\n        <Add />\n      </Grid>\n      <Grid\n        container\n        item\n        xs={10}\n        justify={'space-between'}\n        alignItems={'center'}\n      >\n        <TextField\n          label=\"Add Type\"\n          size=\"small\"\n          style={{ width: '10rem' }}\n          defaultValue={name}\n          onChange={onChange}\n        />\n        <IconButton onClick={onClick} style={{ color: 'inherit' }}>\n          <Done />\n        </IconButton>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default AddType;\n","import React, { useState, useEffect } from 'react';\nimport TypeLabel from '../atoms/TypeLabel';\nimport { Typography, Grid, Divider } from '@material-ui/core';\nimport { useCurrentRoom } from '../../uses/useRoom';\nimport getIcon from '../../utils/getIcon';\nimport camelcase from 'camelcase';\nimport AddType from '../atoms/AddType';\n\nexport type TypePanelProps = {};\n\nconst TypePanel: React.FC<TypePanelProps> = (props: TypePanelProps) => {\n  const [recordTypes, setRecordTypes] = useState<\n    {\n      id: number;\n      name: string;\n      color: number[];\n      active: boolean;\n      record: any[];\n    }[]\n  >([]);\n\n  const room = useCurrentRoom();\n  useEffect(() => {\n    if (room) {\n      const newRecordTypes = room.recordType;\n      setRecordTypes(newRecordTypes);\n    }\n  }, [room]);\n\n  return (\n    <>\n      <Typography variant=\"h6\">Layers</Typography>\n      <Divider />\n      <Grid\n        container\n        item\n        xs={12}\n        direction=\"column\"\n        justify=\"space-around\"\n        alignItems=\"stretch\"\n      >\n        {recordTypes.map((item, index) => {\n          const recordType = recordTypes[index];\n          return (\n            <TypeLabel\n              id={recordType.id}\n              icon={getIcon[camelcase(recordType.name)]}\n              label={recordType.name}\n              color={recordType.color}\n              active={recordType.active}\n              canDelete={recordType.record.length === 0}\n            />\n          );\n        })}\n        <AddType />\n      </Grid>\n    </>\n  );\n};\n\nexport default TypePanel;\n","import React, { useState } from 'react';\nimport { Typography, Grid, IconButton } from '@material-ui/core';\nimport { KeyboardArrowDown } from '@material-ui/icons';\nimport { MotionValue, useTransform, motion } from 'framer-motion';\nimport { useWindowSize } from 'react-use';\n\nexport type TitleProps = { y: MotionValue };\n\nconst TitlePanel: React.FC<TitleProps> = (props: TitleProps) => {\n  const [state, setState] = useState(false);\n  const { height } = useWindowSize();\n  const onClick = () => {\n    props.y.set(state ? -height : 0);\n    setState(!state);\n  };\n\n  const r = useTransform(props.y, [-height, 0], [0, 180]);\n  const y = useTransform(props.y, [-height, 0], [0, height - 192]);\n\n  return (\n    <Grid xs={12} item container>\n      <Grid item xs={12}>\n        <Typography\n          variant={'h5'}\n          align={'right'}\n          style={{ paddingRight: '0.2rem' }}\n        >\n          A Bubble City of Davis\n        </Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <Typography\n          variant={'subtitle1'}\n          align={'right'}\n          style={{ paddingRight: '0.2rem' }}\n        >\n          Explorer\n        </Typography>\n      </Grid>\n      <Grid item xs={2}></Grid>\n      <motion.div style={{ rotate: r, y }}>\n        <Grid item xs={12} justify={'center'}>\n          <IconButton\n            onClick={onClick}\n            style={{ color: 'inherit', margin: '-2.4rem 0 0 0' }}\n          >\n            <KeyboardArrowDown style={{ fontSize: 72 }} />\n          </IconButton>\n        </Grid>\n      </motion.div>\n    </Grid>\n  );\n};\n\nexport default TitlePanel;\n","import React from 'react';\nimport ControlPanel, { ControlPanelProps } from '../molecules/ControlPanel';\nimport TypePanel from '../molecules/TypeLabelPanel';\nimport {\n  makeStyles,\n  Theme,\n  Grid,\n  Divider,\n  IconButton\n} from '@material-ui/core';\nimport TitlePanel from '../molecules/TitlePanel';\nimport { useSpring, motion, useTransform } from 'framer-motion';\nimport { useWindowSize } from 'react-use';\nimport { HelpOutline } from '@material-ui/icons';\n\nexport type SidebarProps = {\n  controlPanel: ControlPanelProps;\n};\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  titlePanel: {\n    width: '15rem',\n    position: 'absolute',\n    top: '2rem',\n    left: '2.5rem',\n    zIndex: 8\n  },\n  expansion: {\n    height: '100%',\n    width: '20rem',\n    position: 'fixed',\n    zIndex: 7\n  },\n  background: {\n    height: '100%',\n    width: '20rem',\n    backgroundColor: theme.palette.primary.main,\n    position: 'absolute'\n  },\n  glass: {\n    height: '100%',\n    width: '20rem',\n    position: 'absolute',\n    backdropFilter: 'blur(5px)'\n  },\n  contents: {\n    height: '100%',\n    width: '20rem',\n    boxSizing: 'border-box',\n    padding: '7rem 1.25rem',\n    position: 'absolute'\n  }\n}));\n\nconst Sidebar: React.FC<SidebarProps> = (props: SidebarProps) => {\n  const classes = useStyles();\n  const { height } = useWindowSize();\n\n  const y = useSpring(-height, { stiffness: 50, mass: 0.4 });\n  const o = useTransform(y, [-height, 0], [0, 0.2]);\n\n  return (\n    <>\n      <Grid item className={`${classes.titlePanel}`}>\n        <TitlePanel y={y} />\n      </Grid>\n      <motion.div style={{ y }} className={`${classes.expansion}`}>\n        <Grid container item>\n          <Grid item className={`${classes.glass}`}></Grid>\n          <motion.div style={{ opacity: o }}>\n            <Grid item className={`${classes.background}`}></Grid>\n          </motion.div>\n          <Grid item className={`${classes.contents}`}>\n            <Divider style={{ margin: '0.6rem 0 2rem 0' }} />\n            <TypePanel />\n            <ControlPanel\n              title={props.controlPanel.title}\n              sliderArray={props.controlPanel.sliderArray}\n              toggleArray={props.controlPanel.toggleArray}\n            />\n            <Grid\n              item\n              xs={12}\n              style={{\n                color: 'inherit',\n                position: 'absolute',\n                bottom: '2rem',\n                right: '1rem'\n              }}\n            >\n              <a\n                href={'https://github.com/keita-makino/ecs272-2020-f'}\n                target={'blank'}\n              >\n                <IconButton>\n                  <HelpOutline style={{ color: '#999999' }} />\n                </IconButton>\n              </a>\n            </Grid>\n          </Grid>\n        </Grid>\n      </motion.div>\n    </>\n  );\n};\n\nexport default Sidebar;\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\n\nimport Switch from '@material-ui/core/Switch';\nimport { gql } from 'apollo-boost';\nimport { useQuery, useApolloClient } from '@apollo/react-hooks';\nimport { Visibility, Edit } from '@material-ui/icons';\n\nexport type ToggleLabelProps = {};\n\nexport const GET_MODE = gql`\n  query GetMode {\n    session @client {\n      editMode\n    }\n  }\n`;\n\nconst ChangeMode: React.FC<ToggleLabelProps> = () => {\n  const client = useApolloClient();\n  const { data: session } = useQuery(GET_MODE);\n  const mode = session?.session.editMode;\n  const onChange = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    checked: boolean\n  ) => {\n    const data = client.readQuery<any>({ query: GET_MODE });\n    client.writeQuery({\n      query: GET_MODE,\n      data: {\n        session: { ...data.session, editMode: checked }\n      }\n    });\n  };\n\n  return (\n    <>\n      <Visibility />\n      <Typography\n        variant=\"body1\"\n        align={'right'}\n        style={{ padding: '0 0.5rem' }}\n      >\n        View\n      </Typography>\n      <Switch checked={mode || false} onChange={onChange} />\n      <Typography\n        variant=\"body1\"\n        align={'right'}\n        style={{ padding: '0 0.5rem' }}\n      >\n        Edit\n      </Typography>\n      <Edit />\n    </>\n  );\n};\n\nexport default ChangeMode;\n","import React from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport ChangeMode from '../molecules/ChangeMode';\nimport zIndex from '@material-ui/core/styles/zIndex';\nimport ShowComputing from '../molecules/ShowComputing';\n\nexport type MiddlePanelProps = {};\n\nconst useStyles = makeStyles({\n  middlePanel: {\n    maxWidth: '24rem',\n    height: '2rem',\n    position: 'relative',\n    padding: '4rem 0',\n    zIndex: 6\n  }\n});\n\nconst MiddlePanel: React.FC<MiddlePanelProps> = (props: MiddlePanelProps) => {\n  const classes = useStyles();\n  return (\n    <Grid\n      container\n      item\n      className={classes.middlePanel}\n      alignItems={'center'}\n      alignContent={'stretch'}\n      justify={'center'}\n    >\n      <ChangeMode />\n    </Grid>\n  );\n};\n\nexport default MiddlePanel;\n","import React from 'react';\n\nimport Map, { MapProps } from '../organisms/Map';\nimport Sidebar, { SidebarProps } from '../organisms/Sidebar';\nimport { makeStyles, Grid, Theme } from '@material-ui/core';\nimport { useWindowSize } from 'react-use';\nimport MiddlePanel from '../organisms/MiddlePanel';\n\ntype Props = { sideBarProps: SidebarProps; mapProps: MapProps };\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  wrapper: {\n    color: theme.palette.text.primary,\n    position: 'relative',\n    zIndex: 10\n  },\n  mainVis: {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    zIndex: 0\n  }\n}));\n\nconst Main: React.FC<Props> = (props: Props) => {\n  const classes = useStyles();\n  const window = useWindowSize();\n  return (\n    <Grid\n      container\n      item\n      alignItems={'stretch'}\n      className={classes.wrapper}\n      style={{ height: window.height }}\n    >\n      <Grid item container xs={4}>\n        <Sidebar {...props.sideBarProps} />\n      </Grid>\n      <Grid item container xs={8} justify={'center'}>\n        <MiddlePanel />\n      </Grid>\n      <Grid\n        item\n        container\n        xs={12}\n        justify={'center'}\n        className={classes.mainVis}\n      >\n        <Map {...props.mapProps} />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Main;\n","const initialStateIndex = {\n  sideBar: {\n    controlPanel: {\n      title: 'Controls',\n      sliderArray: [\n        { label: 'Cell Size' },\n        { label: 'Mark Size' },\n        { label: 'Height' }\n      ],\n      toggleArray: [\n        { label: 'Dark Mode' },\n        { label: 'Scatter' },\n        { label: 'Edge' },\n        { label: 'Bubble' }\n      ]\n    }\n  },\n  map: {\n    viewState: {\n      longitude: -121.740517,\n      latitude: 38.544907,\n      zoom: 13,\n      pitch: 45,\n      bearing: 30\n    }\n  }\n};\n\nexport default initialStateIndex;\n","import { createMuiTheme, responsiveFontSizes } from '@material-ui/core';\n\nexport const defaultTheme = responsiveFontSizes(\n  createMuiTheme({\n    palette: {\n      primary: {\n        dark: '#523d00',\n        main: '#FFBF00',\n        light: '#FFDF80'\n      },\n      secondary: {\n        dark: '#022851',\n        main: '#6884A3',\n        light: '#9AADC2'\n      },\n      background: {\n        default: '#FFF9E5'\n      },\n      text: {\n        primary: '#022851',\n        secondary: '#FFBF00'\n      }\n    }\n  })\n);\n\nexport const darkTheme = responsiveFontSizes(\n  createMuiTheme({\n    palette: {\n      type: 'dark',\n      primary: {\n        dark: '#523d00',\n        main: '#FFBF00',\n        light: '#FFDF80'\n      },\n      secondary: {\n        dark: '#022851',\n        main: '#6884A3',\n        light: '#9AADC2'\n      },\n      background: {\n        default: '#022851'\n      },\n      text: {\n        primary: '#FFF9E5',\n        secondary: '#CDD6E0'\n      }\n    }\n  })\n);\n","import React from 'react';\nimport { Grid, CircularProgress, Box, Typography } from '@material-ui/core';\nimport { motion } from 'framer-motion';\n\nexport type LoadingScreenProps = {};\n\nconst LoadingScreen: React.FC<LoadingScreenProps> = (\n  props: LoadingScreenProps\n) => {\n  return (\n    <Grid\n      container\n      xs={12}\n      justify={'center'}\n      style={{\n        width: '100vw',\n        height: '100vh',\n        position: 'absolute',\n        zIndex: 1000\n      }}\n    >\n      <Grid container item xs={12} alignContent={'center'}>\n        <Grid container item xs={12} justify={'center'}>\n          <CircularProgress size={100} />\n        </Grid>\n        <Grid\n          container\n          item\n          xs={12}\n          justify={'center'}\n          style={{ paddingTop: '2rem' }}\n        >\n          <motion.div\n            initial={{ y: 25, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 3, duration: 2, easing: 'easeOut' }}\n          >\n            <Typography align={'center'} variant={'body1'}>\n              Loading the geometry...\n            </Typography>\n          </motion.div>\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default LoadingScreen;\n","export const mockRecordType = [\r\n  {\r\n    name: 'Food Market',\r\n    active: true,\r\n    record: {\r\n      create: [\r\n        {\r\n          lat: 38.5469272,\r\n          lng: -121.7614358,\r\n          name: \"Trader Joe's\",\r\n          address: '885 Russell Boulevard, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5527011,\r\n          lng: -121.7296655,\r\n          name: 'Grocery Outlet Bargain Market',\r\n          address:\r\n            '1800 East 8th Street suite b, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.554382,\r\n          lng: -121.699461,\r\n          name: 'Target',\r\n          address: '4601 2nd Street, Davis, CA 95618, United States'\r\n        },\r\n        {\r\n          lat: 38.5598898,\r\n          lng: -121.7575869,\r\n          name: 'Save Mart Supermarkets',\r\n          address: '1900 Anderson Road, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5611198,\r\n          lng: -121.7327741,\r\n          name: 'Nugget Markets',\r\n          address: '1414 East Covell Boulevard, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5621327,\r\n          lng: -121.766313,\r\n          name: 'Safeway',\r\n          address: '1451 West Covell Boulevard, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5493054,\r\n          lng: -121.7399081,\r\n          name: 'Davis Food Co-op',\r\n          address: '620 G Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5527378,\r\n          lng: -121.7307332,\r\n          name: 'International Food Market and Catering',\r\n          address: '1760 East 8th Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5499752,\r\n          lng: -121.6958026,\r\n          name: 'Nugget Markets',\r\n          address: '409 Mace Boulevard, Davis, CA 95618, United States'\r\n        },\r\n        {\r\n          lat: 38.5544744,\r\n          lng: -121.7870471,\r\n          name: 'Westlake Market',\r\n          address: '1260 Lake Boulevard, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5413165,\r\n          lng: -121.7248913,\r\n          name: 'Safeway',\r\n          address: '2121 Cowell Boulevard, Davis, CA 95618, United States'\r\n        },\r\n        {\r\n          lat: 38.5427637,\r\n          lng: -121.7406948,\r\n          name: 'Ho Ho Market',\r\n          address: '132 E Street #140, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5450139,\r\n          lng: -121.7373692,\r\n          name: 'Tarad Thai Market',\r\n          address: '920 3rd Street #C, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5471687,\r\n          lng: -121.7608327,\r\n          name: 'Cost Plus World Market',\r\n          address: '871 Russell Boulevard, Davis, CA 95616, United States'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  {\r\n    name: 'Bus Stop',\r\n    active: true,\r\n    record: {\r\n      create: [\r\n        {\r\n          lat: 38.553345,\r\n          lng: -121.752569,\r\n          name: 'Oak Ave & Antioch Drive (NB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.5620141,\r\n          lng: -121.7592795,\r\n          name: 'Alvarado & Anderson',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.558559,\r\n          lng: -121.758707,\r\n          name: 'Anderson Rd & Hanover Drive (SB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.555563,\r\n          lng: -121.752423,\r\n          name: 'Oak Ave & 14th St (SB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.555965,\r\n          lng: -121.750585,\r\n          name: '14th St & Davis HS (WB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.546489,\r\n          lng: -121.763497,\r\n          name: 'Russell Blvd & Sycamore Ln (WB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.5390759,\r\n          lng: -121.7554088,\r\n          name: 'Hutchison Drive & Bioletti Way (EB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.539239,\r\n          lng: -121.7533698,\r\n          name: 'Silo Terminal & Center Island (EB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.54386,\r\n          lng: -121.750044,\r\n          name: 'UC Davis Memorial Union',\r\n          address: 'Howard Way, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5391053,\r\n          lng: -121.7536498,\r\n          name: 'Hutchison at UC Davis Silo WB',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.540158,\r\n          lng: -121.746139,\r\n          name: 'Hutchison Drive & Old Davis Road (WB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.542661,\r\n          lng: -121.743914,\r\n          name: '2nd St & B St (EB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.5434205,\r\n          lng: -121.7377834,\r\n          name: 'Davis',\r\n          address: '840 2nd Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.548896,\r\n          lng: -121.730801,\r\n          name: '5th St & Davis PW Corp Yard (WB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.5400548,\r\n          lng: -121.7275584,\r\n          name: 'Cowell at Drew WB',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.548092,\r\n          lng: -121.7026679,\r\n          name: 'Cowell & La Vida',\r\n          address: 'Davis, CA 95618, United States'\r\n        },\r\n        {\r\n          lat: 38.556407,\r\n          lng: -121.756564,\r\n          name: 'Villanova Drive & Reed Drive (WB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.552723,\r\n          lng: -121.752779,\r\n          name: 'Oak Ave & Antioch Drive (SB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.555945,\r\n          lng: -121.752524,\r\n          name: '14th St & Oak St (WB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.55609,\r\n          lng: -121.752208,\r\n          name: 'Oak & 14th Street (NB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.555718,\r\n          lng: -121.751814,\r\n          name: '14th St & Oak St (EB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.5558449,\r\n          lng: -121.7510789,\r\n          name: 'W. 14th St. at B Street EB',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.5558555,\r\n          lng: -121.7503809,\r\n          name: 'W. 14th St. at Beech WB',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.545015,\r\n          lng: -121.7451316,\r\n          name: 'B St & 4th St (SB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.547003,\r\n          lng: -121.745445,\r\n          name: 'B St & 5th St (NB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.546382,\r\n          lng: -121.746873,\r\n          name: 'Russell Blvd & A St (WB)',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.5461662,\r\n          lng: -121.7471347,\r\n          name: 'Russell at A St. EB',\r\n          address: 'United States'\r\n        },\r\n        {\r\n          lat: 38.5449914,\r\n          lng: -121.7450064,\r\n          name: 'B at 4th NB',\r\n          address: 'United States'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  {\r\n    name: 'Bus Stop',\r\n    active: true,\r\n    record: {\r\n      create: [\r\n        {\r\n          lat: 38.5468512,\r\n          lng: -121.7401068,\r\n          name: 'Taco Bell',\r\n          address: '425 G Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.547271,\r\n          lng: -121.7603641,\r\n          name: 'Old Tea House',\r\n          address: '825 Russell Boulevard # 22, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.538487,\r\n          lng: -121.7524956,\r\n          name: \"Shah's Halal Food\",\r\n          address: '146, Hutchison Drive, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5437749,\r\n          lng: -121.7466819,\r\n          name: \"Raja's Tandoor\",\r\n          address: '207 3rd Street #230, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.543596,\r\n          lng: -121.746092,\r\n          name: 'Pho King 4 Restaurant',\r\n          address: '226 3rd Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5440467,\r\n          lng: -121.7449991,\r\n          name: \"Sam's Restaurant\",\r\n          address: '301 B Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5427967,\r\n          lng: -121.744601,\r\n          name: 'Black Bear Diner',\r\n          address: '255 2nd Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5442611,\r\n          lng: -121.7421764,\r\n          name: 'Cafe Bernardo',\r\n          address: '234 D Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5469126,\r\n          lng: -121.7396512,\r\n          name: 'Thai Nakorn',\r\n          address: '424 G Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5458562,\r\n          lng: -121.7398036,\r\n          name: 'Jack in the Box',\r\n          address: '337 G Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5457495,\r\n          lng: -121.7413194,\r\n          name: \"Farmer's Kitchen Cafe at Natural Food Works\",\r\n          address: '624 4th Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5448198,\r\n          lng: -121.7390042,\r\n          name: 'Ketmoree Thai Restaurant and Bar',\r\n          address: '238 G Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5448089,\r\n          lng: -121.7408087,\r\n          name: 'Panera Bread',\r\n          address: '609 3rd Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5441856,\r\n          lng: -121.739357,\r\n          name: \"Woodstock's Pizza Davis\",\r\n          address: '219 G Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5442211,\r\n          lng: -121.7410244,\r\n          name: 'Yeti Restaurant',\r\n          address: '234 E Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.543758,\r\n          lng: -121.7415364,\r\n          name: \"de Vere's Irish Pub\",\r\n          address: '217 E Street, Davis, CA 9616, United States'\r\n        },\r\n        {\r\n          lat: 38.5444,\r\n          lng: -121.7434679,\r\n          name: 'Burgers and Brew',\r\n          address: '403 3rd Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5427497,\r\n          lng: -121.7413423,\r\n          name: \"Sophia's | Thai Bar & Kitchen\",\r\n          address: '129 E Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.542498,\r\n          lng: -121.7410692,\r\n          name: 'Thai Canteen Davis',\r\n          address: '117 E Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5423987,\r\n          lng: -121.741019,\r\n          name: 'YAKITORI YUCHAN',\r\n          address: '109 E Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5410871,\r\n          lng: -121.7405353,\r\n          name: 'Mikuni',\r\n          address: '500 1st Street #11, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5433203,\r\n          lng: -121.7390342,\r\n          name: 'Paesanos',\r\n          address: '139 G Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5409729,\r\n          lng: -121.7372239,\r\n          name: 'In-N-Out Burger',\r\n          address: '1020 Olive Drive, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.547577,\r\n          lng: -121.7590916,\r\n          name: 'Chengdu Style Restaurant',\r\n          address: '737 Russell Boulevard, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5403141,\r\n          lng: -121.7302672,\r\n          name: 'IHOP',\r\n          address: '1745 Cowell Boulevard, Davis, CA 95618, United States'\r\n        },\r\n        {\r\n          lat: 38.5487671,\r\n          lng: -121.7349319,\r\n          name: 'Taqueria Davis',\r\n          address: '505 L Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5417494,\r\n          lng: -121.7437441,\r\n          name: \"Davis's Pinata Mexican Grill\",\r\n          address: '305 1st Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5438626,\r\n          lng: -121.7384365,\r\n          name: 'Tres Hermanas Davis',\r\n          address: '805 2nd Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5463138,\r\n          lng: -121.7400093,\r\n          name: 'Village Pizza & Grill',\r\n          address: '403 G Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5453498,\r\n          lng: -121.7402206,\r\n          name: \"Steve's Pizza\",\r\n          address: '314 F Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5440461,\r\n          lng: -121.7415946,\r\n          name: 'Chipotle Mexican Grill',\r\n          address: '227 E Street #1, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5419616,\r\n          lng: -121.7500653,\r\n          name: 'The Coffee House',\r\n          address: '250 West Quad, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5421712,\r\n          lng: -121.7438659,\r\n          name: 'Delta of Venus',\r\n          address: '122 B Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5527029,\r\n          lng: -121.7142496,\r\n          name: 'Nami Sushi',\r\n          address: '2880 5th Street #105, Davis, CA 95618, United States'\r\n        },\r\n        {\r\n          lat: 38.5496689,\r\n          lng: -121.6959325,\r\n          name: 'Huku Japanese Bistro',\r\n          address: '417 Mace Boulevard D, Davis, CA 95618, United States'\r\n        },\r\n        {\r\n          lat: 38.5435505,\r\n          lng: -121.7463584,\r\n          name: 'Ali Baba',\r\n          address: '220 3rd Street, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5484599,\r\n          lng: -121.7822644,\r\n          name: 'Osteria Fasulo',\r\n          address: '2657 Portage Bay East #8, Davis, CA 95616, United States'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  {\r\n    name: 'Medical Clinic',\r\n    active: true,\r\n    record: {\r\n      create: [\r\n        {\r\n          lat: 38.5607633,\r\n          lng: -121.7804869,\r\n          name: 'Dignity Health Medical Foundation - Davis',\r\n          address: '2330 West Covell Boulevard, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5638706,\r\n          lng: -121.7696976,\r\n          name: 'Davis Community Clinic',\r\n          address: '2051 John Jones Road, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5629157,\r\n          lng: -121.7715885,\r\n          name: 'Neurology: Sutter Place (Davis): Sutter Medical Foundation',\r\n          address: '2030 Sutter Place #1000, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5625312,\r\n          lng: -121.7715468,\r\n          name: 'Sutter Medical Group',\r\n          address: '2020 Sutter Place #201, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5626044,\r\n          lng: -121.7708959,\r\n          name: 'Charitable Giving: Sutter Davis Hospital',\r\n          address: '2000 Sutter Place, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5620188,\r\n          lng: -121.7713549,\r\n          name: 'Sutter Davis Hospital Family Birthing Center',\r\n          address: '2000 Sutter Place, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5605524,\r\n          lng: -121.7823853,\r\n          name: 'UC Davis Medical Group',\r\n          address:\r\n            '2440 W Covell Blvd Suites A, B & C, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.561898,\r\n          lng: -121.759125,\r\n          name: 'Omnibus Mental Health Associates',\r\n          address: '2055 Anderson Road, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5594132,\r\n          lng: -121.7568279,\r\n          name: 'Sutter West Medical Group',\r\n          address: '1801 Hanover Drive F, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5486518,\r\n          lng: -121.7599313,\r\n          name: 'Sutter Medical Group',\r\n          address: '635 Anderson Road, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5485771,\r\n          lng: -121.759661,\r\n          name: 'Nightingale Medical Centers',\r\n          address: '635 Anderson Road #19, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5427157,\r\n          lng: -121.7616072,\r\n          name: 'UC Davis Student Health and Counseling Services',\r\n          address: '930 Orchard Road, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.5496542,\r\n          lng: -121.7191587,\r\n          name: 'Onsite Medical Service, Inc.',\r\n          address: '638 Cantrill Drive, Davis, CA 95618, United States'\r\n        },\r\n        {\r\n          lat: 38.5427245,\r\n          lng: -121.7615152,\r\n          name: 'Cowell Student Health Center',\r\n          address: '930 Orchard Road, Davis, CA 95616, United States'\r\n        },\r\n        {\r\n          lat: 38.540578,\r\n          lng: -121.7284034,\r\n          name: 'Davis Medical Offices',\r\n          address: '1955 Cowell Boulevard, Davis, CA 95618, United States'\r\n        }\r\n      ]\r\n    }\r\n  }\r\n];\r\n\r\nexport const mockUser = {\r\n  setting: {\r\n    create: {\r\n      cellSize: 0.0005,\r\n      darkMode: false,\r\n      edge: true,\r\n      scatter: true,\r\n      bubble: true,\r\n      height: 1,\r\n      markSize: 0.0015\r\n    }\r\n  }\r\n};\r\n","import React, { useState } from 'react';\nimport {\n  Grid,\n  Card,\n  Typography,\n  Divider,\n  TextField,\n  Button,\n  makeStyles,\n  Theme,\n  Switch\n} from '@material-ui/core';\nimport { useMutation, useQuery, useApolloClient } from '@apollo/react-hooks';\nimport { gql } from 'apollo-boost';\nimport {\n  CREATE_NEW_USER,\n  GET_USER,\n  GET_CURRENT_USER_ID\n} from '../../uses/useUser';\nimport { mockUser, mockRecordType } from '../../data/mock';\nimport {\n  CREATE_NEW_ROOM,\n  GET_CURRENT_ROOM_ID,\n  GET_ROOM\n} from '../../uses/useRoom';\nimport { motion } from 'framer-motion';\n\nexport type StartPanelProps = {};\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  card: { backgroundColor: theme.palette.background.default },\n  row: {\n    padding: '1rem 0'\n  }\n}));\n\nexport const GET_USER_AND_ROOM = gql`\n  query {\n    session @client {\n      userId\n      roomId\n    }\n  }\n`;\n\nconst StartPanel: React.FC<StartPanelProps> = () => {\n  const classes = useStyles();\n  const [userId, setUserId] = useState('Demo User');\n  const [roomId, setRoomId] = useState('Demo Room');\n  const [editable, setEditable] = useState(true);\n  const client = useApolloClient();\n\n  const onChange = (event: any, checked: boolean) => {\n    if (checked) {\n      setUserId('Demo User');\n      setRoomId('Demo Room');\n    }\n    setEditable(!checked);\n  };\n\n  const [mutationUser] = useMutation(CREATE_NEW_USER, {\n    update: (cache, { data: { createOneUser } }) => {\n      cache.writeQuery({\n        query: GET_CURRENT_USER_ID,\n        data: { session: { userId: createOneUser.id, __typename: 'session' } }\n      });\n    },\n    onError: () => {\n      client.cache.writeQuery({\n        query: GET_CURRENT_USER_ID,\n        data: { session: { userId: userId, __typename: 'session' } }\n      });\n    }\n  });\n\n  const [mutationRoom] = useMutation(CREATE_NEW_ROOM, {\n    update: (cache, { data: { createOneRoom } }) => {\n      cache.writeQuery({\n        query: GET_CURRENT_ROOM_ID,\n        data: { session: { roomId: createOneRoom.id, __typename: 'session' } }\n      });\n    },\n    onError: () => {\n      client.cache.writeQuery({\n        query: GET_CURRENT_ROOM_ID,\n        data: { session: { roomId: roomId, __typename: 'session' } }\n      });\n    }\n  });\n\n  const onClickHandler = (userId: string, roomId: string) => () => {\n    mutationUser({\n      variables: { newData: { id: userId, ...mockUser } }\n    });\n    mutationRoom({\n      variables: {\n        newData: { id: roomId, recordType: { create: mockRecordType } }\n      }\n    });\n  };\n\n  const onClick = onClickHandler(userId, roomId);\n\n  const onChangeUser = (event: any) => {\n    setUserId(event.target.value);\n  };\n\n  const onChangeRoom = (event: any) => {\n    setRoomId(event.target.value);\n  };\n\n  return (\n    <Grid container xs={12} justify={'center'}>\n      <motion.div\n        initial={{ y: 25, opacity: 0 }}\n        animate={{ y: 0, opacity: 1 }}\n        transition={{ duration: 1, easing: 'easeOut' }}\n      >\n        <Card className={classes.card}>\n          <Grid\n            container\n            item\n            xs={12}\n            alignContent={'center'}\n            style={{ width: '35rem', height: '35rem' }}\n          >\n            <Grid container item xs={12} justify={'center'}>\n              <Grid container item xs={8} style={{ paddingBottom: '0.5rem' }}>\n                <Grid container item xs={12} justify={'flex-end'}>\n                  <Typography variant={'h4'}>A Bubble City of Davis</Typography>\n                </Grid>\n                <Grid container item xs={12} justify={'flex-end'}>\n                  <Typography variant={'h5'}>Explorer</Typography>\n                </Grid>\n              </Grid>\n              <Grid container item xs={8} justify={'space-between'}>\n                <Typography variant={'body2'}>\n                  The final project of{' '}\n                  <a\n                    href={'https://github.com/ucdavis/ECS272-Winter2020'}\n                    target={'blank'}\n                  >\n                    ECS272-Winter2020\n                  </a>\n                </Typography>\n                <Typography variant={'body2'}>\n                  <a\n                    href={'https://github.com/keita-makino/ecs272-2020-f'}\n                    target={'blank'}\n                  >\n                    GitHub\n                  </a>\n                </Typography>\n              </Grid>\n              <Grid\n                container\n                item\n                xs={10}\n                style={{ padding: '2.5rem 0 1.5rem 0' }}\n              >\n                <Divider style={{ width: '100%' }} />\n              </Grid>\n              <Grid container item xs={8}>\n                <Typography variant={'subtitle1'}>\n                  <u>You can save/load your work with IDs:</u>\n                </Typography>\n              </Grid>\n              <Grid\n                container\n                alignItems={'baseline'}\n                justify={'space-between'}\n                item\n                xs={8}\n                className={classes.row}\n              >\n                <Typography variant={'body1'}>User ID</Typography>\n                <TextField\n                  disabled={!editable}\n                  value={userId}\n                  onChange={onChangeUser}\n                  inputProps={{\n                    style: { textAlign: 'right' }\n                  }}\n                ></TextField>\n              </Grid>\n              <Grid\n                container\n                alignItems={'baseline'}\n                justify={'space-between'}\n                item\n                xs={8}\n                className={classes.row}\n              >\n                <Typography variant={'body1'}>Room ID</Typography>\n                <TextField\n                  disabled={!editable}\n                  value={roomId}\n                  onChange={onChangeRoom}\n                  inputProps={{\n                    style: { textAlign: 'right' }\n                  }}\n                ></TextField>\n              </Grid>\n              <Grid container item xs={10} style={{ padding: '1.5rem 0' }}>\n                <Divider style={{ width: '100%' }} />\n              </Grid>\n              <Grid\n                container\n                alignItems={'baseline'}\n                justify={'space-between'}\n                item\n                xs={8}\n                className={classes.row}\n              >\n                <Typography variant={'subtitle1'}>\n                  <u>Or jump into the demo:</u>\n                </Typography>\n                <Switch onChange={onChange} />\n                <Button\n                  variant={'contained'}\n                  color={'primary'}\n                  onClick={onClick}\n                >\n                  Start\n                </Button>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Card>\n      </motion.div>\n    </Grid>\n  );\n};\n\nexport default StartPanel;\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport StartPanel from '../organisms/StartPanel';\n\ntype Props = {};\n\nconst Start: React.FC<Props> = () => {\n  return (\n    <Grid\n      container\n      xs={12}\n      alignContent={'center'}\n      style={{ position: 'absolute', width: '100vw', height: '100vh' }}\n    >\n      <StartPanel />\n    </Grid>\n  );\n};\n\nexport default Start;\n","import React, { useEffect } from 'react';\n\nimport Main from '../components/templates/Main';\nimport initialStateIndex from '../data/initialState';\nimport useBusy from '../uses/useBusy';\nimport { MuiThemeProvider } from '@material-ui/core';\nimport { defaultTheme, darkTheme } from '../data/theme';\nimport { useCurrentUser } from '../uses/useUser';\nimport LoadingScreen from '../components/organisms/LoadingScreen';\nimport {\n  useSpring,\n  motion,\n  useTransform,\n  AnimatePresence\n} from 'framer-motion';\nimport Start from '../components/templates/Start';\nimport { useCurrentRoom } from '../uses/useRoom';\n\ntype Props = {};\n\nconst Index: React.FC<Props> = () => {\n  const data = useCurrentUser();\n  const room = useCurrentRoom();\n  const isLoading = useBusy('isLoading');\n\n  const opacity = useSpring(1, { stiffness: 30, mass: 0.4 });\n  const opacityInverse = useTransform(opacity, [0, 1], [1, 0]);\n\n  useEffect(() => {\n    if (room) {\n      opacity.set(isLoading === true ? 1 : 0);\n    }\n  }, [isLoading, room]);\n\n  return (\n    <MuiThemeProvider\n      theme={data?.user?.setting.darkMode ? darkTheme : defaultTheme}\n    >\n      <AnimatePresence initial={false}>\n        {!data?.user ? (\n          <motion.div\n            key=\"cover\"\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n          >\n            <Start />\n          </motion.div>\n        ) : (\n          <>\n            <motion.div style={{ opacity }} exit={{ opacity: 0 }}>\n              <LoadingScreen />\n            </motion.div>\n            <motion.div\n              style={{ opacity: opacityInverse }}\n              exit={{ opacity: 0 }}\n            >\n              <Main\n                sideBarProps={initialStateIndex.sideBar}\n                mapProps={initialStateIndex.map}\n              />\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n    </MuiThemeProvider>\n  );\n};\n\nexport default Index;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}