(this.webpackJsonptemplate=this.webpackJsonptemplate||[]).push([[0],{273:function(e,t){},376:function(e,t,n){"use strict";(function(e){var r=n(0),a=n.n(r),c=(n(417),n(91)),i=n(140),o=n(158),u=n(71),s=n(394),l=n(393),d=new i.a({freezeResults:!0}),f=new o.a({uri:"https://ecs272-2020-f.herokuapp.com/"}),p=new c.a({cache:d,resolvers:{},link:f});d.writeData({data:{session:{userId:1,roomId:1,editMode:!1,modifying:!1,computing:!1,loaded:!1,__typename:"session"}}});t.a=Object(l.hot)(e)((function(){return a.a.createElement(u.a,{client:p},a.a.createElement(s.a,null))}))}).call(this,n(287)(e))},394:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(12),i=n(55),o=n(680),u=n(275),s=n(306),l=n(374),d=n(681),f=n(10),p=n.n(f),m=n(15),b=n(19),g=n(50),v=function(e,t){return{start:e,end:t,center:e.add(t).scale(.5),length:e.getDistance(t),getCorrespondingBuffer:function(n,r){var a=[],c=e.getDistance(t),i=Math.ceil((c+Number.EPSILON)/(2*r));return Array(i+1).fill(0).map((function(c,o){var u=e.add(t.sub(e).scale(o/i)),s=[(u.lng-n.domain.boundary.xMin)/n.domain.cellSize,(u.lat-n.domain.boundary.yMin)/n.domain.cellSize],l=r/n.domain.cellSize,d=[Math.floor(s[0]-l),Math.ceil(s[0]+l),Math.floor(s[1]-l),Math.ceil(s[1]+l)],f=d[0],p=d[2],m=d[3]-p;Array(d[1]-f+1).fill(0).map((function(e,t){Array(m+1).fill(0).map((function(e,r){a.push(f+t+(p+r)*n.domain.numOfCells[0])}))}))})),a.filter((function(e,t,n){return n.indexOf(e)===t}))}}},y=function(e,t){return{center:e,radius:t||.002,getDistanceToEdge:function(t){var n=e.lng-t.start.lng,r=e.lat-t.start.lat,a=n*(t.end.lng-t.start.lng)+r*(t.end.lat-t.start.lat),c=0!==t.length?a/Math.pow(t.length,2):void 0,i=c?c<0?t.start:c>1?t.end:t.start.add(t.end.sub(t.start).scale(c)):void 0;return i?e.getDistance(i):e.getDistance(t.center)},getCorrespondingBuffer:function(t,n){var r=[],a=[(e.lng-t.domain.boundary.xMin)/t.domain.cellSize,(e.lat-t.domain.boundary.yMin)/t.domain.cellSize],c=n/t.domain.cellSize,i=[Math.floor(a[0]-c),Math.ceil(a[0]+c),Math.floor(a[1]-c),Math.ceil(a[1]+c)],o=i[0],u=i[2],s=i[3]-u;return Array(i[1]-o+1).fill(0).map((function(e,n){Array(s+1).fill(0).map((function(e,a){r.push(o+n+(u+a)*t.domain.numOfCells[0])}))})),r}}},h=function(e){var t=e.numOfCells,n=new Float32Array(t[0]*t[1]);return{buffer:n,domain:e,getBuffer:function(e,r){return n[e+r*t[0]]},setBuffer:function(e,r,a){n[e+r*t[0]]=a},getPosition:function(t,n){return O(e.boundary.xMin+e.cellSize*t,e.boundary.yMin+e.cellSize*n)}}},O=function e(t,n){return{lng:t,lat:n,getDistance:function(e){return Math.sqrt(Math.pow(e.lng-t,2)+Math.pow(e.lat-n,2))},scale:function(r){return e(t*r,n*r)},add:function(r){return e(t+r.lng,n+r.lat)},sub:function(r){return e(t-r.lng,n-r.lat)}}},j=function(e,t){var n="active"===t?{getBoundary:function(){return[O(5,5)]},getCenter:function(){return O(e.reduce((function(e,t){return e+t.center.lng}),0)/e.length,e.reduce((function(e,t){return e+t.center.lat}),0)/e.length)}}:void 0,r=Object(g.a)({nodes:e.map((function(e){var t=O(e.center.lng,e.center.lat),r={getDistanceToCenter:n?function(){return t.getDistance(n.getCenter())}:void 0};return Object(g.a)({},y(t,e.radius),{},r)}))},n);return r.nodes=r.nodes.map((function(e){return Object(g.a)({},e,{parent:r})})),r},x=function(){var e=Object(b.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.reduce((function(e,t){return t.getDistanceToEdge(n)<t.radius?e+1:e}),0));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(b.a)(p.a.mark((function e(t,n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.nodes.reduce(function(){var e=Object(b.a)(p.a.mark((function e(n,a){var c,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=v(t.center,a.center),e.next=3,x(r,c);case 3:return i=e.sent,o=c.length,e.t0=Math.pow(o,2)*Math.pow(i+1,2),e.next=8,n;case 8:if(e.t1=e.sent.minDistance,!(e.t0<e.t1)){e.next=13;break}e.t2={minDistance:Math.pow(o,2)*Math.pow(i+1,2),closestNeighboringNode:a},e.next=14;break;case 13:e.t2=n;case 14:return e.abrupt("return",e.t2);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve({minDistance:Number.POSITIVE_INFINITY,closestNeighboringNode:n.nodes[0]}));case 2:return e.abrupt("return",e.sent.closestNeighboringNode);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.reduce(function(){var e=Object(b.a)(p.a.mark((function e(t,r){var a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return a=e.sent,c=2*r.center.getDistance(n.center)/n.length,e.abrupt("return",c<a.minDistanceRatio?{minDistanceRatio:c,closestNeighboringNode:r}:a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve({minDistanceRatio:1,closestNeighboringNode:void 0}));case 2:return e.abrupt("return",e.sent.closestNeighboringNode);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(p.a.mark((function e(t,n,r,a){var c,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.start.getDistance(t.center)/(r.start.getDistance(t.center)+r.end.getDistance(t.center)),i=r.start.scale(1-c).add(r.end.scale(c)),o=t.center.add(i.sub(t.center).scale(a*n*t.radius/2/t.getDistanceToEdge(r))),e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y(t),e.abrupt("return",n.reduce((function(e,n){return e||t.getDistance(n.start)<r.radius||t.getDistance(n.end)<r.radius}),Promise.resolve(!1)));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.reduce((function(e,n){return e||t.getDistance(n.center)<n.radius||t.getDistance(n.center)<n.radius}),Promise.resolve(!1));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(b.a)(p.a.mark((function e(t,n){var r,a,c,i,o,u,s,l,d,f,m,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],0!==t.length){e.next=3;break}return e.abrupt("return");case 3:a=!0,c=0;case 5:if(!(a&&c<100)){e.next=70;break}a=!1;case 7:if(a||!(t.length>0)){e.next=68;break}if(c+=1,i=t.pop()){e.next=12;break}return e.abrupt("return",r);case 12:return e.next=14,w(n,i);case 14:if(o=e.sent){e.next=20;break}return r.push(i),e.abrupt("continue",7);case 20:if(!(o.getDistanceToEdge(i)>o.radius)){e.next=23;break}return r.push(i),e.abrupt("continue",7);case 23:u=1.65,s=void 0,l=void 0,d=void 0;case 27:return u/=1.1,e.next=30,k(o,u,i,1);case 30:return d=e.sent,e.next=33,M(d,t);case 33:if(e.t0=e.sent,e.t0){e.next=38;break}return e.next=37,M(d,r);case 37:e.t0=e.sent;case 38:return s=e.t0,e.next=41,D(d,n);case 41:l=e.sent;case 42:if(!s&&l&&u>1){e.next=27;break}case 43:if(s||l||!d){e.next=48;break}t.push(v(i.start,d),v(d,i.end)),a=!0,e.next=66;break;case 48:u=1.65;case 49:return u/=1.1,e.next=52,k(o,u,i,-1);case 52:return d=e.sent,e.next=55,M(d,t);case 55:if(e.t1=e.sent,e.t1){e.next=60;break}return e.next=59,M(d,r);case 59:e.t1=e.sent;case 60:return s=e.t1,e.next=63,D(d,n);case 63:l=e.sent;case 64:if(!s&&l&&u>1){e.next=49;break}case 65:!s&&d&&(t.push(v(i.start,d),v(d,i.end)),a=!0);case 66:e.next=7;break;case 68:e.next=5;break;case 70:for(;t.length>0;)r.push(t.pop());case 71:if(!(r.length>0)){e.next=85;break}if(f=r.pop(),!(r.length>0)){e.next=82;break}return m=r.pop(),b=v(f.start,m.end),e.next=78,w(n,b);case 78:e.sent?(t.push(f),r.push(m)):r.push(b),e.next=83;break;case 82:t.push(f);case 83:e.next=71;break;case 85:return e.abrupt("return",t);case 86:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(b.a)(p.a.mark((function e(t,r,a){var c,i,o,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((c=a.slice(0,r)).length>0)){e.next=11;break}return e.next=4,E(t,j(c,"active"),n);case 4:if(!(i=e.sent)){e.next=11;break}return o=v(t.center,i.center),e.next=9,T([o],n);case 9:return u=e.sent,e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()).flat());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.nodes){e.next=2;break}return e.abrupt("return",[]);case 2:if("getCenter"in t){e.next=4;break}return e.abrupt("return",[]);case 4:return t.nodes.sort((function(e,t){return e.getDistanceToCenter()<t.getDistanceToCenter()?-1:1})),e.next=7,C(t.nodes,n.nodes);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:return r=e.sent,a=n,e.abrupt("return",{cellSize:a,numOfCells:[Math.ceil((r.xMax-r.xMin)/a),Math.ceil((r.yMax-r.yMin)/a)],boundary:r});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.edges?{xMin:Math.min.apply(Math,Object(m.a)(t.nodes.map((function(e){return e.center.lng}))).concat(Object(m.a)(t.edges.map((function(e){return e.start.lng}))),Object(m.a)(t.edges.map((function(e){return e.end.lng}))))),xMax:Math.max.apply(Math,Object(m.a)(t.nodes.map((function(e){return e.center.lng}))).concat(Object(m.a)(t.edges.map((function(e){return e.start.lng}))),Object(m.a)(t.edges.map((function(e){return e.end.lng}))))),yMin:Math.min.apply(Math,Object(m.a)(t.nodes.map((function(e){return e.center.lat}))).concat(Object(m.a)(t.edges.map((function(e){return e.start.lat}))),Object(m.a)(t.edges.map((function(e){return e.end.lat}))))),yMax:Math.max.apply(Math,Object(m.a)(t.nodes.map((function(e){return e.center.lat}))).concat(Object(m.a)(t.edges.map((function(e){return e.start.lat}))),Object(m.a)(t.edges.map((function(e){return e.end.lat})))))}:{xMin:Math.min.apply(Math,Object(m.a)(t.nodes.map((function(e){return e.center.lng})))),xMax:Math.max.apply(Math,Object(m.a)(t.nodes.map((function(e){return e.center.lng})))),yMin:Math.min.apply(Math,Object(m.a)(t.nodes.map((function(e){return e.center.lat})))),yMax:Math.max.apply(Math,Object(m.a)(t.nodes.map((function(e){return e.center.lat}))))},r=t.nodes.length>0?t.nodes[0].radius:.025,n.xMax+=3*r,n.xMin-=3*r,n.yMax+=3*r,n.yMin-=3*r,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=S,P=n(396),F=function(){var e=Object(b.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(P.a)().size(t.area.domain.numOfCells).smooth(!0).contour(Array.from(t.area.buffer),n),e.abrupt("return",r.coordinates);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=n(650),N=function(){var e=Object(b.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.nodes.reduce((function(e,t){return n.reduce((function(e,n){return e&&Object(A.a)(n,[t.center.lng,t.center.lat])}),!0)}),!0));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(b.a)(p.a.mark((function e(t,n,r,a,c){var i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.domain,n.map(function(){var e=Object(b.a)(p.a.mark((function e(n){var o,u,s,l,d,f,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.buffer[n],u=[n%i.numOfCells[0],Math.floor(n/i.numOfCells[0])],s=u[0],l=u[1],d=t.getPosition(s,l),(f="getDistanceToEdge"in c?d.getDistance(c.center):y(O(d.lng,d.lat)).getDistanceToEdge(c))<a?(m=f-a,t.buffer[n]=o+r*Math.pow(m,2)):t.buffer[n]=o;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}(),$=function(){var e=Object(b.a)(p.a.mark((function e(t,n,r,a,c){var i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.edges){e.next=2;break}return e.abrupt("return");case 2:return i=a[1]-a[0],o=Math.pow(i,2),n.edges.map(function(){var e=Object(b.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getCorrespondingBuffer(t,i),e.next=3,q(t,r,c[1]/o,a[1],n);case 3:t=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.buffer.map((function(e){return e-Number.EPSILON})),n.nodes.map(function(){var e=Object(b.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getCorrespondingBuffer(t,i),e.next=3,q(t,r,c[0]/o,a[1],n);case 3:t=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.nodes.map(function(){var e=Object(b.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getCorrespondingBuffer(t,i),e.next=3,q(t,r,c[2]/o,a[1],n);case 3:t=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}(),B=function(){var e=Object(b.a)(p.a.mark((function e(t,n,r){var a,i,o,u,s,l,d,f,m,b,g,v;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t,r);case 2:a=e.sent,i=h(a),o=2*r,u=4*r,s=0,l=1,d=1,f=-.4,m=1;case 11:return e.next=13,$(i,t,n,[o,u],[d,m,f]);case 13:return t.area=e.sent,e.next=16,F(t,l);case 16:if(g=e.sent,v=Object(c.a)(g,1),b=v[0]){e.next=21;break}return e.abrupt("continue",23);case 21:l*=.9,s+=1;case 23:return e.next=25,N(t,b);case 25:if(e.t0=!e.sent,!e.t0){e.next=28;break}e.t0=s<1;case 28:if(e.t0){e.next=11;break}case 29:return e.abrupt("return",b.map((function(e){return{points:n=e.map((function(e){var n=t.area.getPosition(e[0],e[1]);return O(n.lng,n.lat)})),getCoordinates:function(){return n.map((function(e){return[e.lng,e.lat]}))}};var n})));case 30:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Q=n(56),U=n(43);function W(){var e=Object(i.a)(["\n  query {\n    session @client {\n      roomId\n      __typename\n    }\n  }\n"]);return W=function(){return e},e}function _(){var e=Object(i.a)(["\n  query GetRoom($id: Int) {\n    room(where: { id: $id }) {\n      id\n      name\n      recordType(orderBy: { id: asc }) {\n        id\n        name\n        active\n        color\n        record {\n          id\n          lat\n          lng\n          name\n          address\n        }\n      }\n    }\n  }\n"]);return _=function(){return e},e}var L=Object(Q.a)(_()),G=Object(Q.a)(W()),J=function(){var e=Object(U.c)(G).data;return V(null===e||void 0===e?void 0:e.session.roomId)},V=function(e){var t=Object(U.c)(L,{variables:{id:e}}).data;return t?t.room:void 0},Y=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],a=t[1],i=J();return Object(r.useEffect)((function(){i&&a(i.recordType.filter((function(e){return e.active})))}),[i]),n};function H(){var e=Object(i.a)(["\n  query {\n    session @client {\n      userId\n      __typename\n    }\n  }\n"]);return H=function(){return e},e}function Z(){var e=Object(i.a)(["\n  query GetUser($id: Int) {\n    user(where: { id: $id }) {\n      id\n      name\n      setting {\n        cellSize\n        markSize\n        darkMode\n        scatter\n        edge\n        bubble\n        height\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var X=Object(Q.a)(Z()),K=Object(Q.a)(H()),ee=function(){var e=Object(U.c)(K).data;return te(null===e||void 0===e?void 0:e.session.userId)},te=function(e){var t=Object(U.c)(X,{variables:{id:e}}).data;return t?t.user:void 0},ne=n(1);function re(){var e=Object(i.a)(["\n  query {\n    session @client {\n      editMode\n      computing\n      modifying\n      loaded\n    }\n  }\n"]);return re=function(){return e},e}var ae=Object(Q.a)(re()),ce=function(e,t,n){var r=n.readQuery({query:ae}).session;n.writeQuery({query:ae,data:{session:Object(g.a)({},r,Object(ne.a)({},e,t))}})},ie=function(e){var t=Object(U.c)(ae).data,n=Object(r.useState)(!1),a=Object(c.a)(n,2),i=a[0],o=a[1];return Object(r.useEffect)((function(){t&&o(t.session[e])}),[t]),i},oe=function(){var e=Y(),t=ee(),n=ie("modifying"),a=Object(r.useState)({contours:void 0,edges:void 0}),i=Object(c.a)(a,2),o=i[0],u=i[1];return Object(r.useEffect)((function(){var r=function(){var r=Object(b.a)(p.a.mark((function r(){var a;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&t){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Promise.all(e.map(function(){var e=Object(b.a)(p.a.mark((function e(r,a,c){var i,o,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(i=j(r.record.map((function(e){return y(O(e.lng,e.lat),t.setting.markSize)})),"active")).nodes.length){e.next=3;break}return e.abrupt("return",[[],[]]);case 3:return o=j(c.filter((function(e){return e.name!==r.name})).map((function(e){return e.record})).flat().map((function(e){return y(O(e.lng,e.lat),t.setting.markSize)})),"base"),e.next=6,I(i,o);case 6:return e.t0=function(e){return void 0!==e},i.edges=e.sent.flat().filter(e.t0),e.next=10,B(i,o,t.setting.cellSize*(n?2:1));case 10:return u=e.sent,e.abrupt("return",[u.map((function(e){return{contour:e.getCoordinates(),color:[].concat(Object(m.a)(r.color),[30])}})),i.edges.map((function(e){return{start:[e.start.lng,e.start.lat,0],end:[e.end.lng,e.end.lat,0],color:r.color}}))]);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()));case 4:a=r.sent,u({contours:a.flatMap((function(e){return e[0]})),edges:a.map((function(e){return e[1]})).flat(1)});case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();e&&r()}),[e,t,n]),o},ue=function(){var e=Y(),t=Object(r.useState)(void 0),n=Object(c.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){var t=function(){var t=Object(b.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:n=e.map((function(e,t){return e.record.map((function(t){return{type:"Feature",properties:{id:t.id,fillColor:e.color,type:e.name,typeId:e.id,name:t.name,address:t.address},geometry:{type:"Point",coordinates:[t.lng,t.lat]}}}))})).flat(2),i({type:"FeatureCollection",features:n});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e&&t()}),[e]),a},se=function(){var e=Object(U.a)(),t=Object(r.useState)({}),n=Object(c.a)(t,2),a=n[0],i=n[1],o=oe(),u=ue();return Object(r.useEffect)((function(){i({contours:o.contours,edges:o.edges,scatters:u}),ce("computing",!1,e)}),[o,u]),a},le=n(271),de=n(656),fe=n(660),pe=n(661),me=n(662),be=n(399),ge=n(664),ve={foodMarket:"store",busStop:"directionsBus",restaurant:"restaurantMenu",medicalClinic:"hotel"},ye=n(107),he=n.n(ye),Oe=n(663);function je(){var e=Object(i.a)(["\n  mutation DeleteRecord($where: RecordWhereUniqueInput!) {\n    deleteOneRecord(where: $where) {\n      id\n      name\n      lat\n      lng\n      address\n    }\n  }\n"]);return je=function(){return e},e}var xe=Object(Q.a)(je()),Ee=function(e){var t=J(),n=Object(U.b)(xe,{update:function(n,r){r.data.deleteOneRecord;var a=n.readQuery({query:L,variables:{id:t.id}}).room,c=a.recordType.findIndex((function(t){return t.name===e.type})),i=Object(g.a)({},a,{recordType:[].concat(Object(m.a)(a.recordType.filter((function(e,t){return t!==c}))),[Object(g.a)({},a.recordType[c],{record:a.recordType[c].record.filter((function(t){return t.id!==e.id})).sort((function(e,t){return e.id<t.id?-1:1}))})]).sort((function(e,t){return e.id<t.id?-1:1}))});n.writeQuery({query:L,variables:{id:t.id},data:{room:i}})}}),r=Object(c.a)(n,1)[0];return e.name?a.a.createElement(de.a,{style:{maxWidth:"20rem",position:"absolute",zIndex:7,top:e.y,left:e.x}},a.a.createElement(fe.a,{container:!0,item:!0,xs:12,style:{padding:"0.3rem"}},a.a.createElement(fe.a,{container:!0,item:!0,xs:2,alignItems:"center",justify:"center"},a.a.createElement(pe.a,null,ve[he()(e.type)]||"place")),a.a.createElement(fe.a,{container:!0,item:!0,xs:9,alignItems:"center"},a.a.createElement(me.a,{variant:"h6"},e.name)),a.a.createElement(fe.a,{container:!0,item:!0,xs:1,alignItems:"center"},a.a.createElement(be.a,{onClick:function(){r({variables:{where:{id:e.id}}}),e.setTooltip(void 0)}},a.a.createElement(Oe.a,{color:"error"})))),a.a.createElement(ge.a,null),a.a.createElement(fe.a,{container:!0,item:!0,xs:12,style:{padding:"0.3rem"}},a.a.createElement(me.a,{variant:"body1"},e.address))):null},we=function(e,t){var n=t.readQuery({query:L,variables:{id:e.roomId}}).room,r=n.recordType.findIndex((function(t){return t.name===e.type})),a=n.recordType[r].record.findIndex((function(t){return t.id===e.id})),c=Object(g.a)({},n.recordType[r].record[a],{lat:e.lat,lng:e.lng}),i=Object(g.a)({},n,{recordType:[].concat(Object(m.a)(n.recordType.filter((function(e,t){return t!==r}))),[Object(g.a)({},n.recordType[r],{record:[].concat(Object(m.a)(n.recordType[r].record.filter((function(e,t){return t!==a}))),[c]).sort((function(e,t){return e.id<t.id?-1:1}))})]).sort((function(e,t){return e.id<t.id?-1:1}))});t.writeQuery({query:L,data:{room:i}})},ke=n(675),Me=n(686),De=n(665);function Te(){var e=Object(i.a)(["\n  mutation CreateRecord($newData: RecordCreateInput!) {\n    createOneRecord(data: $newData) {\n      id\n      name\n      lat\n      lng\n      address\n    }\n  }\n"]);return Te=function(){return e},e}var Ce=Object(Q.a)(Te()),Ie=function(e){var t=J(),n=Object(U.b)(Ce,{update:function(e,n){var r=n.data.createOneRecord,a=e.readQuery({query:L,variables:{id:t.id}}).room,c=a.recordType.findIndex((function(e){return e.name===u}));console.log(u),console.log(a.recordType);var i=Object(g.a)({},r,{type:{connect:{id:a.recordType[c].id}}}),o=Object(g.a)({},a,{recordType:[].concat(Object(m.a)(a.recordType.filter((function(e,t){return t!==c}))),[Object(g.a)({},a.recordType[c],{record:[].concat(Object(m.a)(a.recordType[c].record),[i]).sort((function(e,t){return e.id<t.id?-1:1}))})]).sort((function(e,t){return e.id<t.id?-1:1}))});e.writeQuery({query:L,variables:{id:t.id},data:{room:o}})}}),r=Object(c.a)(n,1)[0],i=a.a.useState(""),o=Object(c.a)(i,2),u=o[0],s=o[1],l=a.a.useState(""),d=Object(c.a)(l,2),f=d[0],p=d[1];if(!e.address||!t)return null;var b=null===t||void 0===t?void 0:t.recordType.map((function(e){return{value:e.name}}));if(!b)return null;return a.a.createElement(de.a,{style:{width:"15rem",position:"absolute",zIndex:700,top:e.y,left:e.x}},a.a.createElement(fe.a,{container:!0,item:!0,xs:12},a.a.createElement(fe.a,{container:!0,item:!0,xs:10,alignItems:"center",style:{padding:"0.3rem"}},a.a.createElement(ke.a,{style:{width:"15rem"},label:"Add Record",value:f,onChange:function(e){p(e.target.value)}}))),a.a.createElement(ge.a,null),a.a.createElement(fe.a,{container:!0,item:!0,xs:12,style:{padding:"0.3rem"}},a.a.createElement(ke.a,{select:!0,label:"Select Type",value:u,onChange:function(e){s(e.target.value)},style:{width:"15rem"}},b.map((function(e){return a.a.createElement(Me.a,{key:e.value,value:e.value},e.value)})))),a.a.createElement(fe.a,{container:!0,item:!0,xs:12,justify:"flex-end",style:{padding:"0.3rem"}},a.a.createElement(De.a,{color:"primary",onClick:function(){return e.setAddRecordTooltip(void 0)}},"Cancel"),a.a.createElement(De.a,{color:"primary",onClick:function(){var n=null===t||void 0===t?void 0:t.recordType.find((function(e){return e.name===u}));if(n){var a={address:e.address,lat:e.lat,lng:e.lng,name:f,type:{connect:{id:n.id}}};r({variables:{newData:a}}),e.setAddRecordTooltip(void 0),p("")}}},"Add")))},Se=n(392),ze=n.n(Se),Re=function(e){return ze.a.createClient({key:e,Promise:Promise})};function Pe(){var e=Object(i.a)(["\n  mutation UpdateRecord($newData: RecordUpdateInput!, $id: Int!) {\n    updateOneRecord(data: $newData, where: { id: $id }) {\n      id\n      name\n      address\n      lat\n      lng\n      type {\n        id\n      }\n    }\n  }\n"]);return Pe=function(){return e},e}var Fe=Object(Q.a)(Pe()),Ae=function(e){var t=se(),n=Object(r.useState)(void 0),i=Object(c.a)(n,2),f=i[0],p=i[1],m=Object(r.useState)(-1),b=Object(c.a)(m,2),g=b[0],v=b[1],y=Object(r.useState)(),h=Object(c.a)(y,2),O=h[0],j=h[1],x=Object(U.b)(Fe),E=Object(c.a)(x,1)[0],w=Object(r.useState)(),k=Object(c.a)(w,2),M=k[0],D=k[1],T=ee(),C=J(),I=Re("AIzaSyDYpfr3G1zc2VXFr-YmdGWDuMuWUtPWimY"),S=Object(U.a)(),z=ie("editMode"),R=ie("modifying"),P=ie("computing"),F=Object(d.a)(),A=a.a.useState(e.viewState),N=Object(c.a)(A,2),q=N[0],$=N[1];Object(r.useEffect)((function(){p(null===t||void 0===t?void 0:t.scatters)}),[t]),Object(r.useEffect)((function(){!1===z&&v(-1)}),[z]);var B=[(null===T||void 0===T?void 0:T.setting.bubble)?new s.a({id:"polygonLayer",data:t.contours,extruded:!1,stroked:!0,getPolygon:function(e){return e.contour},getFillColor:function(e){return e.color}}):void 0,(null===T||void 0===T?void 0:T.setting.edge)?new l.a({id:"lineLayer",data:t.edges,getSourcePosition:function(e){return e.start},getTargetPosition:function(e){return e.end},getColor:function(e){return e.color}}):void 0,(null===T||void 0===T?void 0:T.setting.scatter)?new le.EditableGeoJsonLayer({id:"geojsonLayer",data:f,mode:le.TranslateMode,selectedFeatureIndexes:[g],filled:!0,stroked:!0,getLineWidth:5/Math.log(q.zoom),getRadius:25e3*(null===T||void 0===T?void 0:T.setting.markSize)||40,getFillColor:function(e){return e.properties.fillColor?e.properties.fillColor:[125,255,255,255]},pickable:!0,onEdit:function(e){var t=e.updatedData,n=e.editType;if("translating"!==n||R||ce("modifying",!0,S),!P){var r=t.features[g];we({roomId:C.id,id:r.properties.id,type:r.properties.type,lat:r.geometry.coordinates[1],lng:r.geometry.coordinates[0]},S)}if("translated"===n){ce("modifying",!1,S);var a=t.features[g];I.reverseGeocode({latlng:{lat:a.geometry.coordinates[1],lng:a.geometry.coordinates[0]}},(function(e,t){E({variables:{newData:{lat:a.geometry.coordinates[1],lng:a.geometry.coordinates[0],name:a.properties.name,address:a.properties.address,type:{connect:{id:a.properties.typeId}}},id:a.properties.id}})}))}p(t)}}):void 0].filter((function(e){return void 0!==e})),Q=a.a.createElement(u.b,{mapboxApiAccessToken:"pk.eyJ1Ijoia2VtYWtpbm8iLCJhIjoiY2s1aHJkeWVpMDZzbDNubzltem80MGdnZSJ9.Mn_8DItICHFJyiPJ2rP_0Q",width:F.width,height:F.height,mapStyle:T&&T.setting.darkMode?"mapbox://styles/mapbox/dark-v10":"mapbox://styles/mapbox/light-v10"},a.a.createElement(u.a,{id:"height",type:"fill-extrusion",source:"composite","source-layer":"building",paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ee,M),a.a.createElement(Ie,O),a.a.createElement(o.a,{width:F.width,height:F.height,viewState:q,layers:B,getCursor:function(){return z?"crosshair":"pointer"},onClick:z?function(e){v(e.index),-1!==e.index||O||I.reverseGeocode({latlng:{lat:e.coordinate[1],lng:e.coordinate[0]}},(function(t,n){j({address:n.json.results[0].formatted_address,x:e.x+16,y:e.y+16,lat:e.coordinate[1],lng:e.coordinate[0],setAddRecordTooltip:j})}))}:function(e){var t,n;j(void 0),(null===(t=e.object)||void 0===t?void 0:null===(n=t.properties)||void 0===n?void 0:n.type)?D({id:e.object.properties.id,type:e.object.properties.type,name:e.object.properties.name,address:e.object.properties.address,x:e.x+16,y:e.y+16,setTooltip:D}):D(void 0)},onDragStart:function(){return D(void 0)},controller:!z&&!0,onViewStateChange:function(e){var t=e.viewState;return $(t)}},Q))},Ne=n(687),qe=n(666);function $e(){var e=Object(i.a)(["\n  mutation UpdateUser($newData: UserUpdateInput!, $id: Int!) {\n    updateOneUser(data: $newData, where: { id: $id }) {\n      id\n      name\n      setting {\n        darkMode\n        cellSize\n        markSize\n        scatter\n        edge\n        bubble\n      }\n    }\n  }\n"]);return $e=function(){return e},e}var Be=Object(Q.a)($e()),Qe=function(e){var t=ee(),n=Object(r.useState)([!1,!1]),i=Object(c.a)(n,2),o=i[0],u=i[1],s=Object(U.b)(Be),l=Object(c.a)(s,1)[0];Object(r.useEffect)((function(){t&&u([t.setting[he()(e.label)],!0])}),[t]);return a.a.createElement(fe.a,{container:!0,item:!0,xs:12,style:{height:"3rem"},alignItems:"center"},a.a.createElement(fe.a,{item:!0,xs:10},a.a.createElement(me.a,{variant:"body1"},e.label)),a.a.createElement(fe.a,{item:!0,xs:2},a.a.createElement(qe.a,{checked:o[0],disabled:!o[1],onChange:function(n,r){u([r,!1]),l({variables:{newData:{setting:{update:Object(ne.a)({},he()(e.label),r)}},id:t.id}})}})))},Ue=function(e){var t=ee(),n=Object(r.useState)([0,!1]),i=Object(c.a)(n,2),o=i[0],u=i[1],s=Object(U.b)(Be),l=Object(c.a)(s,1)[0];Object(r.useEffect)((function(){t&&u([t.setting[he()(e.label)],!0])}),[t]);var d="Mark Size"===e.label?{max:.008,min:5e-4,step:5e-4}:{max:.002,min:25e-5,step:25e-5};return a.a.createElement(fe.a,{container:!0,item:!0,xs:12,style:{height:"3rem"},alignItems:"center"},a.a.createElement(fe.a,{xs:4},a.a.createElement(me.a,{variant:"body1"},e.label)),a.a.createElement(fe.a,{xs:8},a.a.createElement(Ne.a,Object.assign({value:o[0],disabled:!o[1],valueLabelDisplay:"auto",onChange:function(e,t){u([t,!0])},onChangeCommitted:function(n,r){u([r,!1]),l({variables:{newData:{setting:{update:Object(ne.a)({},he()(e.label),r)}},id:t.id}})}},d))))},We=function(e){return a.a.createElement(fe.a,{style:{paddingTop:"2rem"}},a.a.createElement(me.a,{variant:"h6"},e.title),a.a.createElement(ge.a,null),e.sliderArray.map((function(e){return a.a.createElement(Ue,{label:e.label})})),e.toggleArray.map((function(e){return a.a.createElement(Qe,{label:e.label})})))},_e=n(682),Le=n(274);function Ge(){var e=Object(i.a)(["\n  mutation DeleteRecordType($where: RecordTypeWhereUniqueInput!) {\n    deleteOneRecordType(where: $where) {\n      id\n    }\n  }\n"]);return Ge=function(){return e},e}function Je(){var e=Object(i.a)(["\n  mutation UpdateBoolean($newData: RecordTypeUpdateInput!, $id: Int!) {\n    updateOneRecordType(data: $newData, where: { id: $id }) {\n      id\n      name\n      color\n      active\n    }\n  }\n"]);return Je=function(){return e},e}var Ve=Object(Q.a)(Je()),Ye=Object(Q.a)(Ge()),He=function(e){var t=ee(),n=J(),i=Object(U.b)(Ve,{update:function(e,t){var r=t.data.updateOneRecordType,a=e.readQuery({query:L,variables:{id:n.id}}).room;e.writeQuery({query:L,data:{room:Object(g.a)({},a,{recordType:[].concat(Object(m.a)(a.recordType.filter((function(e){return e.id!==r.id}))),[r]).sort((function(e,t){return e.id<t.id?-1:1}))})}})}}),o=Object(c.a)(i,1)[0],u=Object(U.b)(Ye,{update:function(e,t){var r=t.data.deleteOneRecordType,a=e.readQuery({query:L,variables:{id:n.id}}).room;e.writeQuery({query:L,data:{room:Object(g.a)({},a,{recordType:Object(m.a)(a.recordType.filter((function(e){return e.id!==r.id}))).sort((function(e,t){return e.id<t.id?-1:1}))})}})}}),s=Object(c.a)(u,1)[0],l=Object(r.useState)([!1,!1]),d=Object(c.a)(l,2),f=d[0],p=d[1];Object(r.useEffect)((function(){e&&p([e.active,!0])}),[e]);var b=e.color?"#"+Le.hsl.hex(Le.rgb.hsl(e.color).map((function(e,n){return 2===n?e-10*((null===t||void 0===t?void 0:t.setting.darkMode)?-1:1):e}))):"#aaaaaa";return a.a.createElement(fe.a,{style:{height:"3rem",color:b},container:!0,item:!0,xs:12},a.a.createElement(fe.a,{container:!0,item:!0,xs:2,alignItems:"center"},a.a.createElement(pe.a,null,e.icon||"place")),a.a.createElement(fe.a,{container:!0,item:!0,xs:10,justify:"space-between",alignItems:"center"},a.a.createElement(me.a,{variant:"body1"},e.label),a.a.createElement(fe.a,{item:!0},a.a.createElement(_e.a,{style:{color:b},checked:f[0],disabled:!f[1],onChange:function(t,n){p([n,!1]),o({variables:{newData:{active:n},id:e.id}})}}),void 0===e.icon&&!0===e.canDelete?a.a.createElement(be.a,{onClick:function(){s({variables:{where:{id:e.id}}})},style:{padding:"9px 9px 9px 0"}},a.a.createElement(Oe.a,{color:"error"})):null)))},Ze=n(667),Xe=n(668),Ke=n(131),et=n(615);function tt(){var e=Object(i.a)(["\n  mutation CreateRecordType($newData: RecordTypeCreateInput!) {\n    createOneRecordType(data: $newData) {\n      id\n      name\n      active\n      color\n      record {\n        id\n        name\n        lat\n        lng\n        address\n      }\n    }\n  }\n"]);return tt=function(){return e},e}var nt=Object(Q.a)(tt()),rt=function(e){var t=Object(Ke.a)(),n=J(),i=Object(r.useState)(""),o=Object(c.a)(i,2),u=o[0],s=o[1],l=Object(U.b)(nt,{update:function(e,t){var r=t.data.createOneRecordType;console.log(r);var a=e.readQuery({query:L,variables:{id:n.id}}).room;console.log([].concat(Object(m.a)(a.recordType),[r]).sort((function(e,t){return e.id<t.id?-1:1}))),e.writeQuery({query:L,data:{room:Object(g.a)({},a,{recordType:[].concat(Object(m.a)(a.recordType),[r]).sort((function(e,t){return e.id<t.id?-1:1}))})}})}}),d=Object(c.a)(l,1)[0];return a.a.createElement(fe.a,{style:{height:"3rem",color:t.palette.text.primary},container:!0,item:!0,xs:12},a.a.createElement(fe.a,{container:!0,item:!0,xs:2,alignItems:"center"},a.a.createElement(Ze.a,null)),a.a.createElement(fe.a,{container:!0,item:!0,xs:10,justify:"space-between",alignItems:"center"},a.a.createElement(ke.a,{label:"Add Type",size:"small",style:{width:"10rem"},defaultValue:u,onChange:function(e){s(e.target.value)}}),a.a.createElement(et.a,{onClick:function(e){if(n){var t={active:!0,name:u||"no name",room:{connect:{id:n.id}},record:{create:[]}};d({variables:{newData:t}})}},style:{color:"inherit"}},a.a.createElement(Xe.a,null))))},at=function(e){var t=Object(r.useState)([]),n=Object(c.a)(t,2),i=n[0],o=n[1],u=J();return Object(r.useEffect)((function(){if(u){var e=u.recordType;o(e)}}),[u]),a.a.createElement(a.a.Fragment,null,a.a.createElement(me.a,{variant:"h6"},"Layers"),a.a.createElement(ge.a,null),a.a.createElement(fe.a,{container:!0,item:!0,xs:12,direction:"column",justify:"space-around",alignItems:"stretch"},i.map((function(e,t){var n=i[t];return a.a.createElement(He,{id:n.id,icon:ve[he()(n.name)],label:n.name,color:n.color,active:n.active,canDelete:0===n.record.length})})),a.a.createElement(rt,null)))},ct=n(670),it=n(669),ot=n(109),ut=function(e){var t=Object(r.useState)(!1),n=Object(c.a)(t,2),i=n[0],o=n[1],u=Object(d.a)().height,s=Object(ot.c)(e.y,[-u,0],[0,180]),l=Object(ot.c)(e.y,[-u,0],[0,u-192]);Object(ot.c)(e.y,[-u,0],[0,1]);return a.a.createElement(fe.a,{xs:12,item:!0,container:!0},a.a.createElement(fe.a,{item:!0,xs:12},a.a.createElement(me.a,{variant:"h5",align:"right",style:{paddingRight:"0.2rem"}},"A Bubble City of Davis")),a.a.createElement(fe.a,{item:!0,xs:12},a.a.createElement(me.a,{variant:"subtitle1",align:"right",style:{paddingRight:"0.2rem"}},"Explorer")),a.a.createElement(fe.a,{item:!0,xs:2}),a.a.createElement(ot.a.div,{style:{rotate:s,y:l}},a.a.createElement(fe.a,{item:!0,xs:12,justify:"center"},a.a.createElement(et.a,{onClick:function(){e.y.set(i?-u:0),o(!i)},style:{color:"inherit",margin:"-2.4rem 0 0 0"}},a.a.createElement(it.a,{style:{fontSize:72}})))))},st=n(671),lt=Object(ct.a)((function(e){return{titlePanel:{width:"15rem",position:"absolute",top:"2rem",left:"2.5rem",zIndex:8},expansion:{height:"100%",width:"20rem",position:"fixed",zIndex:7},background:{height:"100%",width:"20rem",backgroundColor:e.palette.primary.main,position:"absolute"},glass:{height:"100%",width:"20rem",position:"absolute",backdropFilter:"blur(5px)"},contents:{height:"100%",width:"20rem",boxSizing:"border-box",padding:"7rem 1.25rem",position:"absolute"}}})),dt=function(e){var t=lt(),n=Object(d.a)().height,r=Object(ot.b)(-n,{stiffness:50,mass:.4}),c=Object(ot.c)(r,[-n,0],[0,.2]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(fe.a,{item:!0,className:"".concat(t.titlePanel)},a.a.createElement(ut,{y:r})),a.a.createElement(ot.a.div,{style:{y:r},className:"".concat(t.expansion)},a.a.createElement(fe.a,{container:!0,item:!0},a.a.createElement(fe.a,{item:!0,className:"".concat(t.glass)}),a.a.createElement(ot.a.div,{style:{opacity:c}},a.a.createElement(fe.a,{item:!0,className:"".concat(t.background)})),a.a.createElement(fe.a,{item:!0,className:"".concat(t.contents)},a.a.createElement(ge.a,{style:{margin:"0.6rem 0 2rem 0"}}),a.a.createElement(at,null),a.a.createElement(We,{title:e.controlPanel.title,sliderArray:e.controlPanel.sliderArray,toggleArray:e.controlPanel.toggleArray}),a.a.createElement(fe.a,{item:!0,xs:12,style:{color:"inherit",position:"absolute",bottom:"2rem",right:"1rem"}},a.a.createElement("a",{href:"https://github.com/keita-makino/ecs272-2020-f",target:"blank"},a.a.createElement(et.a,null,a.a.createElement(st.a,{style:{color:"#999999"}}))))))))},ft=n(672),pt=n(673);function mt(){var e=Object(i.a)(["\n  query GetMode {\n    session @client {\n      editMode\n    }\n  }\n"]);return mt=function(){return e},e}var bt=Object(Q.a)(mt()),gt=function(){var e=Object(U.a)(),t=Object(U.c)(bt).data,n=null===t||void 0===t?void 0:t.session.editMode;return a.a.createElement(a.a.Fragment,null,a.a.createElement(ft.a,null),a.a.createElement(me.a,{variant:"body1",align:"right",style:{padding:"0 0.5rem"}},"View"),a.a.createElement(qe.a,{checked:n||!1,onChange:function(t,n){var r=e.readQuery({query:bt});e.writeQuery({query:bt,data:{session:Object(g.a)({},r.session,{editMode:n})}})}}),a.a.createElement(me.a,{variant:"body1",align:"right",style:{padding:"0 0.5rem"}},"Edit"),a.a.createElement(pt.a,null))},vt=Object(ct.a)({middlePanel:{maxWidth:"24rem",height:"2rem",position:"relative",padding:"4rem 0",zIndex:6}}),yt=function(e){var t=vt();return a.a.createElement(fe.a,{container:!0,item:!0,className:t.middlePanel,alignItems:"center",alignContent:"stretch"},a.a.createElement(gt,null))},ht=Object(ct.a)((function(e){return{wrapper:{color:e.palette.text.primary,position:"relative",zIndex:10},mainVis:{position:"fixed",top:0,left:0,zIndex:0}}})),Ot=function(e){var t=ht(),n=Object(d.a)();return a.a.createElement(fe.a,{container:!0,item:!0,alignItems:"stretch",className:t.wrapper,style:{height:n.height}},a.a.createElement(fe.a,{item:!0,container:!0,xs:4},a.a.createElement(dt,e.sideBarProps)),a.a.createElement(fe.a,{item:!0,container:!0,xs:8,justify:"center"},a.a.createElement(yt,null)),a.a.createElement(fe.a,{item:!0,container:!0,xs:12,justify:"center",className:t.mainVis},a.a.createElement(Ae,e.mapProps)))},jt={sideBar:{controlPanel:{title:"Controls",sliderArray:[{label:"Cell Size"},{label:"Mark Size"}],toggleArray:[{label:"Dark Mode"},{label:"Scatter"},{label:"Edge"},{label:"Bubble"}]}},map:{viewState:{longitude:-121.740517,latitude:38.544907,zoom:13,pitch:45,bearing:30}}},xt=n(674),Et=n(683),wt=n(395),kt=Object(Et.a)(Object(wt.a)({palette:{primary:{dark:"#523d00",main:"#FFBF00",light:"#FFDF80"},secondary:{dark:"#022851",main:"#6884A3",light:"#9AADC2"},text:{primary:"#022851",secondary:"#FFBF00"}}})),Mt=Object(Et.a)(Object(wt.a)({palette:{type:"dark",primary:{dark:"#523d00",main:"#FFBF00",light:"#FFDF80"},secondary:{dark:"#022851",main:"#6884A3",light:"#9AADC2"},text:{primary:"#FFF9E5",secondary:"#CDD6E0"}}}));t.a=function(e){var t=ee();return a.a.createElement(xt.a,{theme:(null===t||void 0===t?void 0:t.setting.darkMode)?Mt:kt},a.a.createElement(Ot,{sideBarProps:jt.sideBar,mapProps:jt.map}))}},411:function(e,t,n){e.exports=n(608)},416:function(e,t,n){},417:function(e,t,n){},422:function(e,t){},475:function(e,t){},489:function(e,t){},491:function(e,t){},516:function(e,t){},518:function(e,t){},547:function(e,t){},548:function(e,t){},608:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(54),i=n.n(c),o=(n(416),n(376));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(o.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[411,1,2]]]);
//# sourceMappingURL=main.26efec67.chunk.js.map